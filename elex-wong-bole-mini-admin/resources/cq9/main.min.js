var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),__awaiter=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(r,n){function a(e){try{h(o.next(e))}catch(t){n(t)}}function s(e){try{h(o["throw"](e))}catch(t){n(t)}}function h(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}h((o=o.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return o([e,t])}}function o(i){if(r)throw new TypeError("Generator is already executing.");for(;h;)try{if(r=1,n&&(a=n[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return h.label++,{value:i[1],done:!1};case 5:h.label++,n=i[1],i=[0];continue;case 7:i=h.ops.pop(),h.trys.pop();continue;default:if(a=h.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){h=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){h.label=i[1];break}if(6===i[0]&&h.label<a[1]){h.label=a[1],a=i;break}if(a&&h.label<a[2]){h.label=a[2],h.ops.push(i);break}a[2]&&h.ops.pop(),h.trys.pop();continue}i=t.call(e,h)}catch(o){i=[6,o],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,n,a,s,h={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.touchEnabled=!0,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdded,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoved,e),e}return __extends(i,t),i.prototype.onAdded=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},i.prototype.onRemoved=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.destroy()},i.prototype.createChildren=function(){t.prototype.createChildren.call(this),e.UIUtils.addButtonScaleEffects(this)},i.prototype.onEnterFrame=function(e){},i.prototype.destory=function(e){},i.prototype.onTouchTap=function(e){e.stopPropagation()},i.prototype.destroy=function(){},i}(eui.Component);e.BaseUI=t,__reflect(t.prototype,"game.BaseUI")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.width=GameConfig.curWidth(),e.height=GameConfig.curHeight(),e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchTap,e),e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdded,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoved,e),e}return __extends(i,t),i.prototype.onAdded=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this),this.resizeGroup&&EventManager.instance.addEvent(EventNotify.EVENT_RESIZE,this.eventResize,this),EventManager.instance.addEvent(ServerNotify.s_payGold,this.updateGold,this)},i.prototype.updateGold=function(){this.goldLabel&&(this.goldLabel.text=NumberFormat.formatGold_scence(Global.playerProxy.playerData.gold))},i.prototype.onRemoved=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.resizeGroup&&EventManager.instance.removeEvent(EventNotify.EVENT_RESIZE,this.eventResize,this),EventManager.instance.removeEvent(ServerNotify.s_payGold,this.updateGold,this)},i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.resizeGroup&&this.eventResize(),e.UIUtils.addButtonScaleEffects(this),this.bindTouchEnded(this)},i.prototype.onEnterFrame=function(e){},i.prototype.destory=function(e){egret.Tween.get(this).to({alpha:0},200).call(function(){e&&e()},this)},i.prototype.onShowAnimateOver=function(){},i.prototype.onTouchTap=function(e){},i.prototype.bindTouchEnded=function(e){if(e)for(var t=e.numChildren,i=0;t>i;i++){var o=e.getChildAt(i);this.bindTouchEnded(o)}},i.prototype.destroy=function(){this.resGroup},i.prototype.eventResize=function(){this.resizeGroup&&e.UIUtils.fullscreen(this.resizeGroup)},i}(eui.Component);e.BaseComponent=t,__reflect(t.prototype,"game.BaseComponent")}(game||(game={}));var ResourceProxyBase=function(e){function t(t){void 0===t&&(t="");var i=e.call(this,t)||this;return i._dataMap=new Array,i._proxyName="",i._proxyName=t,i}return __extends(t,e),t}(puremvc.Proxy);__reflect(ResourceProxyBase.prototype,"ResourceProxyBase",["puremvc.IProxy","puremvc.INotifier"]);var HashMap=function(){function e(){this.data={}}return e.prototype.set=function(e,t){this.data[e]=t},e.prototype.put=function(e,t){this.set(e,t)},e.prototype.get=function(e,t){return 1==arguments.length?this.data[e]:this.has(e)?this.data[e]:t},e.prototype.add=function(e,t){},e.prototype.has=function(e){return this.data.hasOwnProperty(e)},e.prototype.remove=function(e){this.data[e]=void 0,delete this.data[e]},e.prototype.clear=function(){this.data={}},e.prototype.keys=function(){var e=[];for(var t in this.data)e.push(t);return e},e.prototype.values=function(){var e=[];for(var t in this.data)e.push(this.data[t]);return e},e.prototype.reset=function(e){e&&(this.data=e.data||e)},e.prototype.parse=function(e){if(e){var t=JSON.parse(e);this.data=t}},e.prototype.toString=function(){return JSON.stringify(this.data)},e}();__reflect(HashMap.prototype,"HashMap");var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.addEventListener(egret.TouchEvent.TOUCH_TAP,e.onTouchTap,e),e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAdded,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemoved,e),e}return __extends(i,t),i.prototype.onAdded=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAdded,this)},i.prototype.onRemoved=function(){this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoved,this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),e.UIUtils.removeButtonScaleEffects(this)},i.prototype.createChildren=function(){t.prototype.createChildren.call(this),e.UIUtils.addButtonScaleEffects(this)},i.prototype.onTouchTap=function(e){},i}(eui.ItemRenderer);e.BaseItemRender=t,__reflect(t.prototype,"game.BaseItemRender")}(game||(game={}));var BaseMediator=function(e){function t(t,i){void 0===t&&(t=""),void 0===i&&(i=null);var o=e.call(this,t,i)||this;return o.isInitialized=!1,o.isPopUp=!1,o.ui=null,o.w=0,o.h=0,o.type="panel",o.w=GameConfig.curWidth(),o.h=GameConfig.curHeight(),o}return __extends(t,e),t.prototype.showUI=function(e,t,i,o,r,n){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===n&&(n=!1),this.ui=e,this.beforShow(),this.initUI(),this.initData(),PopUpManager.addPopUp(e,t,i,o,r,n)},t.prototype.beforShow=function(){},t.prototype.initUI=function(){},t.prototype.closeViewComponent=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:switch(t=this.type){case"panel":return[3,1];case"scene":return[3,4]}return[3,5];case 1:return this.viewComponent?[4,PopUpManager.removePopUpAsync(this.viewComponent,e)]:[3,3];case 2:i.sent(),this.viewComponent=null,i.label=3;case 3:return[3,5];case 4:return this.viewComponent&&(game.UIUtils.removeSelf(this.viewComponent),this.viewComponent=null),[3,5];case 5:return[2]}})})},t.prototype.initData=function(){},t.prototype.closePanel=function(e,t){void 0===e&&(e=0),PopUpManager.removePopUp(this.ui,e),this.destroy()},t.prototype.destroy=function(){},t.prototype.getIsPopUp=function(){return this.isPopUp},t.prototype.getIsInit=function(){return this.isInitialized},t.prototype.getWidth=function(){return this.ui.width},t.prototype.getHeight=function(){return this.ui.height},t}(puremvc.Mediator);__reflect(BaseMediator.prototype,"BaseMediator",["puremvc.IMediator","puremvc.INotifier"]);var PathTypeEnum;!function(e){e[e.NEI_TEST=0]="NEI_TEST",e[e.CQ9_CLIENT=1]="CQ9_CLIENT",e[e.CQ9_CLIENT_PRODUCT=2]="CQ9_CLIENT_PRODUCT"}(PathTypeEnum||(PathTypeEnum={}));var PathConfig=function(){function e(){this.socket_path_1="",this.use_oss=!1,this.debug_model=!1,this.token_login=!1}return e}();__reflect(PathConfig.prototype,"PathConfig");var PathConfigFac=function(){function e(){}return e.getPathByType=function(e){var t=new PathConfig;switch(t.log_level=2,e){case PathTypeEnum.NEI_TEST:t.http_header="http://",t.http_server="192.168.2.188",t.http_port="3002",t.socket_header="ws://",t.socket_path="192.168.2.188",t.use_oss=!1,t.log_level=LogUtils.DEBUG,t.debug_model=!1;break;case PathTypeEnum.CQ9_CLIENT_PRODUCT:t.http_header="http://",t.http_server="game.cq9.5b1m.cn",t.http_port="3002",t.socket_header="ws://",t.socket_path="game.cq9.5b1m.cn",t.use_oss=!1,t.log_level=LogUtils.DEBUG,t.debug_model=!1;break;case PathTypeEnum.CQ9_CLIENT:t.http_header="http://",t.http_server="game.cq9.5b1m.cn",t.http_port="3002",t.socket_header="ws://",t.socket_path="game.cq9.5b1m.cn",t.use_oss=!1,t.log_level=LogUtils.INFO,t.debug_model=!1,t.token_login=!0}return t},e}();__reflect(PathConfigFac.prototype,"PathConfigFac");var majiang;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.recordsJson={},t.chupais=[],t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.setRecords(),this.group1.removeChildren(),this.group2.removeChildren(),this.group3.removeChildren()},t.prototype.clearDatas=function(){this.group1.removeChildren(),this.group2.removeChildren(),this.group3.removeChildren()},t.prototype.setRecords=function(){for(var e=1;21>=e;e++){var t=this["mj"+e];this.recordsJson[e]={},this.recordsJson[e].source=t.source,this.recordsJson[e].x=t.x,this.recordsJson[e].y=t.y,this.recordsJson[e].scaleX=t.scaleX,this.recordsJson[e].scaleY=t.scaleY}},t.prototype.removeLastChupai=function(){var e=this.chupais.pop();game.UIUtils.removeSelf(e),e=null},t.prototype.onAdded=function(){e.prototype.onAdded.call(this),EventManager.instance.addEvent(EventNotify.FIND_COLOR,this.findColor,this)},t.prototype.onRemoved=function(){e.prototype.onRemoved.call(this),EventManager.instance.removeEvent(EventNotify.FIND_COLOR,this.findColor,this)},t.prototype.findColor=function(e){for(var t=e.data,i=0;i<this.chupais.length;i++)this.chupais[i].showMaskRect(t)},t.prototype.showDianpaoAni=function(){var e=this.chupais.pop();return e.dianpaoAni()},t}(game.BaseUI);e.BaseChupaiGroup=t,__reflect(t.prototype,"majiang.BaseChupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.recordsJson={},t.shoupais=[],t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.setRecords(),this.mainGroup.removeChildren()},t.prototype.setRecords=function(){for(var e=1;14>=e;e++){var t=this["image"+e];game.UIUtils.setAnchorPot(t),t&&(this.recordsJson[e]={},this.recordsJson[e].source=t.source,this.recordsJson[e].x=t.x,this.recordsJson[e].y=t.y,this.recordsJson[e].scaleX=t.scaleX,this.recordsJson[e].scaleY=t.scaleY,this.recordsJson[e].name="mj"+e)}},t.prototype.setRecordsOver=function(){for(var e=15;27>=e;e++){var t=this["image"+e];game.UIUtils.setAnchorPot(t),t&&(this.recordsJson[e]={},this.recordsJson[e].source=t.source,this.recordsJson[e].x=t.x,this.recordsJson[e].y=t.y,this.recordsJson[e].scaleX=t.scaleX,this.recordsJson[e].scaleY=t.scaleY,this.recordsJson[e].name="mj"+e)}},t.prototype.hideRight3pais=function(e){if(void 0===e&&(e=!1),!(this.mainGroup.numChildren<1)){var t=14;this.mainGroup.getChildByName("mj"+t)||(t=13);for(var i=t;i>t-3;i--)this.mainGroup.getChildByName("mj"+i).visible=e}},t.prototype.showAllShoupai=function(){for(var e=0;e<this.shoupais.length;e++)this.shoupais[e].visible=!0},t.prototype.isMopais=function(e){var t=[2,5,8,11,14];return t.indexOf(e)>-1},t.prototype.removeShoupaiByPeng=function(e){this.removeLastPai(),this.removeLastPai()},t.prototype.removeLastPai=function(){var e=this.getLastMajiang();game.Utils.removeArrayItem(this.shoupais,e),game.UIUtils.removeSelf(e)},t.prototype.getLastVisibleMajiang=function(){for(var e=14;e>0;e--){var t=this.mainGroup.getChildByName("mj"+e);if(t&&t.visible)return t}return null},t.prototype.getLastMajiang=function(){for(var e=14;e>0;e--){var t=this.mainGroup.getChildByName("mj"+e);if(t)return t}return null},t.prototype.getMopaiPosition=function(){var e=this.mainGroup.numChildren;return this.recordsJson[e]},t.prototype.changeLast2Mopai=function(e){if(this.isMopais(this.shoupais.length)){var t=this.getLastMajiang();e&&this.mopai.resetValue(t.value),game.Utils.removeArrayItem(this.shoupais,t),game.UIUtils.removeSelf(t),this.showMopai(!1)}},t.prototype.hideMopai=function(){this.mopai.visible=!1},t.prototype.showMopai=function(e){this.mopai.visible=!0,this.setPointByIndex(this.shoupais.length+1)},t.prototype.playerNewCardPush=function(e){e&&this.mopai.colorImage&&this.mopai.showColor(e),this.setPointByIndex(this.shoupais.length+1),this.mopai.visible=!0;var t=this.mopai.y;this.mopai.y-=20,egret.Tween.get(this.mopai).to({y:t},200)},t.prototype.setPointByIndex=function(e){var t=this.recordsJson[e];t&&(this.mopai.x=t.x,this.mopai.y=t.y),this.mopai.changeBgResource&&this.mopai.changeBgResource(t.source)},t.prototype.clearGroup=function(){this.shoupais=[],this.mainGroup.removeChildren(),this.mopai=null},t.prototype.shoupaisVisible=function(){for(var e=0;e<this.shoupais.length;e++)this.shoupais[e].visible=!1},t}(game.BaseUI);e.BaseShoupaiGroup=t,__reflect(t.prototype,"majiang.BaseShoupaiGroup")}(majiang||(majiang={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.pmdKey="base",t}return __extends(t,e),t.prototype.onAdded=function(){e.prototype.onAdded.call(this)},t.prototype.onRemoved=function(){e.prototype.onRemoved.call(this)},t.prototype.paomadeng=function(e){var t=e.data;LogUtils.logDJ(t)},t}(e.BaseComponent);e.BaseScene=t,__reflect(t.prototype,"game.BaseScene")}(game||(game={}));var majiang;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.maskRect.mask=this.bgImage1},t.prototype.dianpaoAni=function(){var e=this,t=GameCacheManager.instance.getMcCache("hu_up1",this.direction+"_hu_up1",null),i=GameCacheManager.instance.getMcCache("hu_up2",this.direction+"_hu_up2",null);return this.addChild(i),this.addChild(this.bgImage),this.addChild(this.colorImage),this.addChild(t),i.scaleX=i.scaleX=1.5,i.x=this.width/2,i.y=this.height/2,t.scaleX=t.scaleY=1.5,t.x=this.width/2,t.y=this.height/2-20,t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(t)},this),i.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(i)},this),t.play(1),i.play(1),egret.setTimeout(function(){game.UIUtils.removeSelf(e)},this,400),400},t.prototype.showMaskRect=function(e){this.maskRect.visible=this.value==e},t}(eui.Component);e.BaseChupai=t,__reflect(t.prototype,"majiang.BaseChupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName=new HjzyTipSkin,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),game.UIUtils.setAnchorPot(this)},t.prototype.showText=function(e){e>0?(this.tipImage.visible=!1,this.valueText.font="ying_font_fnt"):(this.tipImage.visible=!0,this.valueText.font="shu_font_fnt");var t=e;e>=0&&(t="+"+e),this.valueText.text=t},t.prototype.showAni=function(){var e=this,t={alpha:1};this.horizontalCenter?t.horizontalCenter=this.horizontalCenter+30:this.left?t.left=this.left+30:this.right&&(t.right=this.right-30),this.alpha=0,egret.Tween.removeTweens(this),egret.Tween.get(this).to(t,300).to({alpha:0},1e3).call(function(){game.UIUtils.removeSelf(e)})},t}(eui.Component);e.HjzyTip=t,__reflect(t.prototype,"majiang.HjzyTip")}(majiang||(majiang={}));var EventNotify=function(){function e(){}return e.EVENT_RESIZE="EVENT_RESIZE",e.EVENT_USER_LOGIN_SUC="EVENT_USER_LOGIN_SUC",e.ENTER_GOLD_SCENE="ENTER_GOLD_SCENE",e.READY="SysNotify_READY",e.START_GAME="SysNotify_START_GAME",e.SEND_EMOJI="SysNotify_SEND_EMOJI",e.PLAYER_LUOZI="SysNotify_PLAYER_LUOZI",e.QIU_HE="SysNotify_ANSWER_QIUHE",e.GAME_OVER="EventNotify_GAME_OVER",e.RESTART_GAME="EventNotify_RESTART_GAME",e.SHOUPAI_TOUCH="EventNotify_SHOUPAI_TOUCH",e.HSZ_SELECT_NUM="EventNotify_HSZ_SELECT_NUM",e.GANG_SELECT="EventNotify_GANG_SELECT",e.RECONNECT_SUC="EventNotify_RECONNECT_SUC",e.SHOW_GNBTN="EventNotify_SHOW_GNBTN",e.FIND_COLOR="EventNotify_FIND_COLOR",e.SHOUPAI_TOUCH_SUC="EventNotify_SHOUPAI_TOUCH_SUC",e.UPDATE_PLAYER_COUNT="EventNotify_UPDATE_PLAYER_COUNT",e.CHANG_PLAYER_HEADER="EventNotify_CHANG_PLAYER_HEADER",e.CHANG_PLAYER="EventNotify_CHANG_PLAYER",e}();__reflect(EventNotify.prototype,"EventNotify");var PanelNotify=function(){function e(){}return e.OPEN_ALERT="PanelNotify_OPEN_ALERT",e.CLOSE_ALERT="PanelNotify_CLOSE_ALERT",e.OPEN_HELP="PanelNotify_OPEN_HELP",e.CLOSE_HELP="PanelNotify_CLOSE_HELP",e.OPEN_HEADER="PanelNotify_OPEN_HEADER",e.CLOSE_HEADER="PanelNotify_CLOSE_HEADER",e.OPEN_SETTING="PanelNotify_OPEN_SETTING",e.CLOSE_SETTING="PanelNotify_CLOSE_SETTING",e.CLOSE_GAMERECORD="PanelNotify_CLOSE_GAMERECORD",e.OPEN_GAMERECORD="PanelNotify_OPEN_GAMERECORD",e.CLOSE_NIUGAMERECORD="PanelNotify_CLOSE_NIUGAMERECORD",e.OPEN_NIUGAMERECORD="PanelNotify_OPEN_NIUGAMERECORD",e.OPEN_HELP_SHU="PanelNotify_OPEN_HELP_SHU",e.CLOSE_HELP_SHU="PanelNotify_CLOSE_HELP_SHU",e.OPEN_SGHELP="PanelNotify_OPEN_SGHELP",e.CLOSE_SGHELP="PanelNotify_CLOSE_SGHELP",e.OPEN_LAOHUGAME_TIPS="PanelNotify_OPEN_LAOHUGAME_TIPS",e.CLOSE_LAOHUGAME_TIPS="PanelNotify_CLOSE_LAOHUGAME_TIPS",e.OPEN_LEAVE_LAOHU_PANEL="PanelNotify_OPEN_LEAVE_LAOHU_PANEL",e.CLOSE_LEAVE_LAOHU_PANEL="PanelNotify_CLOSE_LEAVE_LAOHU_PANEL",e.OPEN_SETTING_LAOHU_PANEL="PanelNotify_OPEN_SETTING_LAOHU_PANEL",e.CLOSE_SETTING_LAOHU_PANEL="PanelNotify_CLOSE_SETTING_LAOHU_PANEL",e.OPEN_LAOHU_AUTO_PANEL="PanelNotify_OPEN_LAOHU_AUTO_PANEL",e.CLOSE_LAOHU_AUTO_PANEL="PanelNotify_CLOSE_LAOHU_AUTO_PANEL",e}();__reflect(PanelNotify.prototype,"PanelNotify");var SceneNotify=function(){function e(){}return e.OPEN_LOADING="SceneNotify_OPEN_LOADING",e.CLOSE_LOADING="SceneNotify_CLOSE_LOADING",e.OPEN_HOME="SceneNotify_OPEN_HOME",e.CLOSE_HOME="SceneNotify_CLOSE_HOME",e.OPEN_MAJIANG="OPEN_MAJIANG",e.CLOSE_MAJIANG="CLOSE_MAJIANG",e.FLUSH_MAJIANG="FLUSH_MAJIANG",e.OPEN_MAJIANG_MATCH="OPEN_MAJIANG_MATCH",e.CLOSE_MAJIANG_MATCH="CLOSE_MAJIANG_MATCH",e.PRE_OPEN_HOME="SceneNotify_PRE_OPEN_HOME",e.PRE_CLOSE_HOME="SceneNotify_PRE_CLOSE_HOME",e.OPEN_GAME="SceneNotify_OPEN_GAME",e.CLOSE_GAME="SceneNotify_CLOSE_GAME",e.OPEN_RANK="SceneNotify_OPEN_RANK",e.CLOSE_RANK="SceneNotify_CLOSE_RANK",e.GAME_NEXT_QUESTION="GAME_NEXT_QUESTION",e.CLOSE_TOUCH_GROUP="CLOSE_TOUCH_GROUP",e.OPEN_JIESUAN="OPEN_JIESUAN",e.CLOSE_JIESUAN="CLOSE_JIESUAN",e}();__reflect(SceneNotify.prototype,"SceneNotify");var ServerNotify=function(){function e(){}return e.s_robLogin="s_robLogin",e.s_playerEnter="s_playerEnter",e.s_playerQuitRoom="s_playerQuitRoom",e.s_playerOffline="s_playerOffline",e.s_userStatusChanged="s_userStatusChanged",e.s_playerReconnect="s_playerReconnect",e.s_playerReady="s_playerReady",e.s_startNewRound="s_startNewRound",e.s_initHandCards="s_initHandCards",e.s_quitRoom="s_quitRoom",e.s_maCardSelected="s_maCardSelected",e.s_playerSelectHSZ="s_playerSelectHSZ",e.s_roomHSZFinished="s_roomHSZFinished",e.s_HSZCardExchanged="s_HSZCardExchanged",e.s_playerSelectColor="s_playerSelectColor",e.s_playerColorSelected="s_playerColorSelected",e.s_curPlay="s_curPlay",e.s_newCard="s_newCard",e.s_playCard="s_playCard",e.s_publicCardChanged="s_publicCardChanged",e.s_hangupTask="s_hangupTask",e.s_playerPengCard="s_playerPengCard",e.s_playerGangCard="s_playerGangCard",e.s_playerHu="s_playerHu",e.s_roundSettlement="s_roundSettlement",e.s_roomFinished="s_roomFinished",e.s_reqDestroyRoom="s_reqDestroyRoom",e.s_respDestroyRoom="s_respDestroyRoom",e.s_dealerChanged="s_dealerChanged",e.s_roomChat="s_roomChat",e.s_gameSyncCoins="s_gameSyncCoins",e.s_syncGold="s_syncGold",e.s_countdown="s_countdown",e.s_playerClearWaitTimeout="s_playerClearWaitTimeout",e.s_trustee="s_trustee",e.s_cancelGangForQG="s_cancelGangForQG",e.s_payGold="s_payGold",e.s_broadcast="s_broadcast",e.s_enterResult="s_enterResult",e.s_startRobDealer="s_startRobDealer",e.s_playerRobDealer="s_playerRobDealer",e.s_addAnteMulti="s_addAnteMulti",e.s_startAddAnte="s_startAddAnte",e.s_addAnteFinish="s_addAnteFinish",e.s_startPlayCards="s_startPlayCards",e.s_playCards="s_playCards",e.s_playCardsFinish="s_playCardsFinish",e.s_playerAddAnte="s_playerAddAnte",e.s_playerAnteChange="s_playerAnteChange",e.s_robDealerMulti="s_robDealerMulti",e.s_openCard="s_openCard",e.s_openCardFinish="s_openCardFinish",e.s_startOpenCard="s_startOpenCard",e}();__reflect(ServerNotify.prototype,"ServerNotify");var ServerPostPath=function(){function e(){}return e.hall_sceneHandler_c_enter="hall.sceneHandler.c_enter",e.game_mjHandler_c_selectHSZ="game.mjHandler.c_selectHSZ",e.game_mjHandler_c_selectColor="game.mjHandler.c_selectColor",e.game_mjHandler_c_pengTask="game.mjHandler.c_pengTask",e.game_mjHandler_c_gangTask="game.mjHandler.c_gangTask",e.game_mjHandler_c_passTask="game.mjHandler.c_passTask",e.game_mjHandler_c_huTask="game.mjHandler.c_huTask",e.game_roomHandler_c_queryRoomInfo="game.roomHandler.c_queryRoomInfo",e.game_roomHandler_c_quitRoom="game.roomHandler.c_quitRoom",e.game_mjHandler_c_cancelTrustee="game.mjHandler.c_cancelTrustee",e.game_mjHandler_c_chat="game.roomHandler.c_chat",e.hall_sceneHandler_c_queryGameState="hall.sceneHandler.c_queryGameState",e.hall_userHandler_c_getReportInfo="hall.userHandler.c_getReportInfo",e.hall_sceneHandler_c_getGameOnlineCountInfo="hall.sceneHandler.c_getGameOnlineCountInfo",e.hall_sceneHandler_c_leave="hall.sceneHandler.c_leave",e}();__reflect(ServerPostPath.prototype,"ServerPostPath");var SysNotify=function(){function e(){}return e}();__reflect(SysNotify.prototype,"SysNotify");var game;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.execute=function(e){},t}(puremvc.SimpleCommand);e.ControllerPrepCommand=t,__reflect(t.prototype,"game.ControllerPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){var i=[e.NetProxy,e.PlayerProxy,e.GameProxy],o=this;_.forEach(i,function(e,t){var r=new i[t];o.facade.registerProxy(r),r&&r.init&&r.init()})},i}(puremvc.SimpleCommand);e.ModelPrepCommand=t,__reflect(t.prototype,"game.ModelPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.initializeMacroCommand=function(){this.addSubCommand(e.ControllerPrepCommand),this.addSubCommand(e.ModelPrepCommand),this.addSubCommand(e.ViewPrepCommand)},i}(puremvc.MacroCommand);e.StartupCommand=t,__reflect(t.prototype,"game.StartupCommand")}(game||(game={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.execute=function(t){this.facade.registerMediator(new e.LogoMediator)},i}(puremvc.SimpleCommand);e.ViewPrepCommand=t,__reflect(t.prototype,"game.ViewPrepCommand",["puremvc.ICommand","puremvc.INotifier"])}(game||(game={}));var ConnectInfoBean=function(){function e(){}return e}();__reflect(ConnectInfoBean.prototype,"ConnectInfoBean");var PlayerInfoBean=function(){function e(){}return e}();__reflect(PlayerInfoBean.prototype,"PlayerInfoBean");var PlayerGameDataBean=function(){function e(){this.huCards=[2,3,3,4]}return e}();__reflect(PlayerGameDataBean.prototype,"PlayerGameDataBean");var EnterSceneResp=function(){function e(){}return e}();__reflect(EnterSceneResp.prototype,"EnterSceneResp");var GameNumsInfoBean=function(){function e(){}return e}();__reflect(GameNumsInfoBean.prototype,"GameNumsInfoBean");var GamePlayerInfoBean=function(){function e(){}return e}();__reflect(GamePlayerInfoBean.prototype,"GamePlayerInfoBean");var GameRoundData=function(){function e(){}return e}();__reflect(GameRoundData.prototype,"GameRoundData");var InitHandCardsResp=function(){function e(){}return e}();__reflect(InitHandCardsResp.prototype,"InitHandCardsResp");var GameRoomInfoBean=function(){function e(){}return e.prototype.getRoomId=function(){},e.prototype.setRoundData=function(e){this.curRound=e.curRound,this.dealer=e.dealer,this.dealerLZ=e.dealerLZ,this.curPlay=e.dealer},e.prototype.updateRoom=function(e){},e}();__reflect(GameRoomInfoBean.prototype,"GameRoomInfoBean");var NNRoomInfoBean=function(){function e(){}return e.prototype.setRoundData=function(e){this.curRound=e.curRound,this.dealer=e.dealer,this.dealerLZ=e.dealerLZ,this.curPlay=e.dealer},e}();__reflect(NNRoomInfoBean.prototype,"NNRoomInfoBean");var majiang;!function(e){var t=function(){function e(){}return e}();e.RecordBean=t,__reflect(t.prototype,"majiang.RecordBean")}(majiang||(majiang={}));var SGRoomInfoBean=function(){function e(){}return e.prototype.setRoundData=function(e){this.curRound=e.curRound,this.dealer=e.dealer,this.dealerLZ=e.dealerLZ,this.curPlay=e.dealer},e}();__reflect(SGRoomInfoBean.prototype,"SGRoomInfoBean");var game;!function(e){var t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.reconnect=!1,e.lastGameConfig={},e.gameType=0,e.gameRecord_time=0,e.gameRecord_time1=0,e}return __extends(i,t),i.prototype.init=function(){Global.gameProxy=this,this.listenOnCall()},i.prototype.getMineIndex=function(){return this.playerInfo?this.playerInfo.playerIndex:null},i.prototype.getMineGameData=function(){return this.roomInfo?this.roomInfo.players[this.getMineIndex()]:void 0},i.prototype.listenOnCall=function(){EventManager.instance.addEvent(ServerNotify.s_publicCardChanged,this.updatePublicCardPush,this)},i.prototype.updatePublicCardPush=function(e){var t=e.data;this.roomInfo&&(this.roomInfo.publicCardNum=t.cardNum)},i.prototype.addPublicCardPush=function(e){return this.roomInfo?(this.roomInfo.publicCardNum+=e,this.roomInfo.publicCardNum):0},i.prototype.setPlayerInfo=function(e){this.playerInfo=e},i.prototype.joinPlayer=function(e,t){this.roomInfo&&(this.roomInfo.players[e]=t)},i.prototype.getPlayerByIndex=function(e){return this.roomInfo?this.roomInfo.players[e]:void 0},i.prototype.getPlayers=function(){return this.roomInfo?this.roomInfo.players:[]},i.prototype.setRoomInfo=function(e){LogUtils.logDJ(e),Global.gameProxy.currentSceneId=e.roomInfo.sceneId,this.reconnect=e.reconnect,this.playerInfo=new GamePlayerInfoBean,_.extendOwn(this.playerInfo,e.playerInfo),null==this.roomInfo&&(this.roomInfo=new GameRoomInfoBean,_.extendOwn(this.roomInfo,e.roomInfo),this.roomInfo.getRoomId())},i.prototype.clearRoomInfo=function(){this.reconnect=null,this.playerInfo=null,this.roomInfo=null},i.prototype.getMineShuopaiArr=function(){var t=Global.gameProxy.getMineGameData(),i=t.cards,o=[],r=[],n=t.lastCard;for(var a in i)for(var s=i[a],h=0;s>h;h++)Math.floor(parseInt(a)/10)==t.selectColor?o.push(parseInt(a)):r.push(parseInt(a));var c=r.concat(o);return t.lastCard&&(e.Utils.removeArrayItem(c,n),c.push(n)),c},i.prototype.getOthersShuopaiArr=function(t){var i=Global.gameProxy.getPlayerByIndex(t),o=i.cards,r=[],n=[],a=i.lastCard;for(var s in o)for(var h=o[s],c=0;h>c;c++)Math.floor(parseInt(s)/10)==i.selectColor?r.push(parseInt(s)):n.push(parseInt(s));var l=n.concat(r);return i.lastCard&&(e.Utils.removeArrayItem(l,a),l.push(a)),l},i.prototype.updateWanjiaShoupai=function(e,t){var i=Global.gameProxy.getMineGameData(),o=i.cards,r=o[e];r?(r+=t,1>r?delete o[e]:o[e]=r):t>0&&(o[e]=t)},i.prototype.updateWanjiaShoupaiByIndex=function(e,t,i){var o=Global.gameProxy.getPlayerByIndex(i),r=o.cards;if(r){var n=r[e];n?(n+=t,1>n?delete r[e]:r[e]=n):t>0&&(r[e]=t)}},i.prototype.checkIsRoundMe=function(){return e.Utils.valueEqual(this.roomInfo.curPlay,this.playerInfo.playerIndex)},i.prototype.checkIndexIsMe=function(t){return e.Utils.valueEqual(t,this.playerInfo.playerIndex)},i.prototype.recordPlayerPengs=function(e,t,i){var o=Global.gameProxy.getPlayerByIndex(e);o.cards&&(Global.gameProxy.updateWanjiaShoupaiByIndex(t,-1,e),Global.gameProxy.updateWanjiaShoupaiByIndex(t,-1,e)),o.cardNum-=2,o.pengCards||(o.pengCards=[]),o.pengCards.push(t)},i.prototype.recordChu2Dianpao=function(e){var t=Global.gameProxy.getPlayerByIndex(e);t.playCards.pop()},i.prototype.recordPlayerGang=function(t){var i=t.card,o=t.playerIndex,r=Global.gameProxy.getPlayerByIndex(o);switch(r.cards&&(Global.gameProxy.updateWanjiaShoupaiByIndex(i,-1,o),Global.gameProxy.updateWanjiaShoupaiByIndex(i,-1,o),Global.gameProxy.updateWanjiaShoupaiByIndex(i,-1,o),Global.gameProxy.updateWanjiaShoupaiByIndex(i,-1,o)),t.gang){case 1:r.cardNum-=1,e.Utils.removeArrayItem(r.pengCards,i);break;case 2:r.cardNum-=4;break;case 3:r.cardNum-=3;break;case 4:r.cardNum-=3}r.gangCards||(r.gangCards=[]),r.gangCards.push(i)},i.prototype.clearCurPlay=function(){this.roomInfo.curPlay=0},i.prototype.clearTasks=function(){var e=Global.gameProxy.getMineGameData();e.hangupTasks={},this.roomInfo.hangupTaskSource=null},i.prototype.clearLastPai=function(){this.getMineGameData().lastCard=0},i.prototype.addRecord=function(e){var t=Global.gameProxy.getMineGameData();t.bills||(t.bills=[]),t.bills.push(e)},i.prototype.getSceneConfig=function(e){return this.gameNums[e]},i.prototype.getSceneDizhu=function(){return this.gameNums[this.roomInfo.sceneId].bet_base},i.prototype.addPlayerCard=function(e,t){var i=this.roomInfo.players[e];i.playCards.push(t)},i.prototype.addHuTasks=function(e){this.roomInfo.huTasks.push(e)},i.prototype.getCardArrByIndex=function(t){var i=this.getPlayerByIndex(t),o=i.cards,r=[],n=[],a=i.lastCard;for(var s in o)for(var h=o[s],c=0;h>c;c++)Math.floor(parseInt(s)/10)==i.selectColor?r.push(parseInt(s)):n.push(parseInt(s));var l=n.concat(r);return i.lastCard&&(e.Utils.removeArrayItem(l,a),l.push(a)),l},i.prototype.findHasQueColor=function(){var e=this.getPlayerByIndex(this.getMineIndex());if(e.huCards.length>0)return!1;var t=e.cards,i=e.lastCard;if(Math.floor(parseInt(o)/10)==i)return!0;for(var o in t)for(var r=t[o],n=0;r>n;n++)if(Math.floor(parseInt(o)/10)==e.selectColor)return!0;return!1},i.NAME="GameProxy",i}(ResourceProxyBase);e.GameProxy=t,__reflect(t.prototype,"game.GameProxy")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.callbackList=new HashMap,t}return __extends(t,e),t.prototype.init=function(){Global.netProxy=this},t.prototype.sendRequest=function(e,t,i){var o=new egret.URLLoader;this.callbackList.set(o.hashCode,i),o.dataFormat=egret.URLLoaderDataFormat.VARIABLES,o.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this);var r=new egret.URLRequest(e);r.requestHeaders.push(new egret.URLRequestHeader("Content-Type","application/json;charset=utf-8")),r.method=t?egret.URLRequestMethod.POST:egret.URLRequestMethod.GET,r.data=JSON.stringify(t),o.load(r)},t.prototype.sendRequestAsync=function(e,t){var i=this;return new Promise(function(o,r){var n=new egret.URLLoader;n.dataFormat=egret.URLLoaderDataFormat.VARIABLES,n.addEventListener(egret.Event.COMPLETE,function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,i.onPostComplete,i),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,i.onPostIOError,i);var r=t.data.replace(/\s/g,""),n=JSON.parse(r);o(n)},i);var a=new egret.URLRequest(e);a.requestHeaders.push(new egret.URLRequestHeader("Content-Type","application/json;charset=utf-8")),a.method=t?egret.URLRequestMethod.POST:egret.URLRequestMethod.GET,a.data=JSON.stringify(t),n.load(a)
})},t.prototype.onPostComplete=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.COMPLETE,this.onPostComplete,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this);var i=t.data.replace(/\s/g,""),o=JSON.parse(i),r=this.callbackList.get(t.hashCode);r&&(r(o),this.callbackList.remove(t.hashCode))},t.prototype.onPostIOError=function(e){egret.error("post error : "+e)},t.prototype.sendGetRequest=function(e,t,i){var o=new egret.URLLoader;this.callbackList.set(o.hashCode,i),o.dataFormat=egret.URLLoaderDataFormat.TEXT,o.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this);var r=new egret.URLRequest(e);r.method=egret.URLRequestMethod.GET;r.data=t,o.load(r)},t.NAME="NetProxy",t}(ResourceProxyBase);e.NetProxy=t,__reflect(t.prototype,"game.NetProxy")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.playerStatus=PlayerStatusEnum.IDLE,t}return __extends(t,e),t.prototype.init=function(){Global.playerProxy=this},t.prototype.updatePlayerGold=function(e){this.playerData.gold=e},t.prototype.updatePlayerInfo=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,o;return __generator(this,function(r){switch(r.label){case 0:return t=ServerConfig.PATH_CONFIG.http_header+ServerConfig.PATH_CONFIG.http_server+":"+ServerConfig.PATH_CONFIG.http_port,i={token:Global.playerProxy.token},[4,Global.netProxy.sendRequestAsync(t+"/gate/clientApi/getPlayerInfo",i)];case 1:return o=r.sent(),this.playerData=o.data,e&&e(),[2]}})})},t.NAME="PlayerProxy",t}(ResourceProxyBase);e.PlayerProxy=t,__reflect(t.prototype,"game.PlayerProxy")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e.isFullScreen=!1,e}return __extends(i,t),i.prototype.createChildren=function(){if(t.prototype.createChildren.call(this),this.checkServerTime(),ServerConfig.PATH_CONFIG=PathConfigFac.getPathByType(ServerConfig.PATH_TYPE),GameConfig.JS_VERSION=window.jsVersion,GameConfig.RES_VERSION=window.resVersion,NativeApi.instance.initApi(),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.Tween.removeTweens(GameConfig.curStage())},egret.lifecycle.onResume=function(){egret.Tween.resumeTweens(GameConfig.curStage()),NativeApi.instance.isiOSDevice&&NativeApi.instance.isChromeForIOS&&FrameUtils.postMessage("0")},this.checkVersion(),this.checkRuntime(),this.addChild(GameLayerManager.gameLayer()),e.AppFacade.getInstance().startUp(GameLayerManager.gameLayer()),this.selectServerConfig(),ServerConfig.PATH_CONFIG.token_login&&!Global.playerProxy.token)return void alert("请用正确的游戏打开方式！");LogUtils.loglevel=ServerConfig.PATH_CONFIG.log_level;var i=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",i),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),egret.ImageLoader.crossOrigin="anonymous",ServerConfig.PATH_CONFIG.use_oss?RES.loadConfig("resource/default.res.json","resource/"):RES.loadConfig("resource/default.res.json","resource/")},i.prototype.checkServerTime=function(){var t=e.Utils.getURLQueryString("t");switch(t){case"1":ServerConfig.PATH_TYPE=PathTypeEnum.NEI_TEST;break;case"5":ServerConfig.PATH_TYPE=PathTypeEnum.CQ9_CLIENT;break;case"6":ServerConfig.PATH_TYPE=PathTypeEnum.CQ9_CLIENT_PRODUCT}},i.prototype.screenFull=function(){"Android"==egret.Capabilities.os&&window.screenfull.enabled&&window.screenfull.toggle()},i.prototype.checkRuntime=function(){this.checkIsHengShu(),GameConfig.CURRENT_WIDTH=this.stage.stageWidth,GameConfig.CURRENT_HEIGHT=this.stage.stageHeight,GameConfig.WINSIZE_WIDTH=this.stage.stageWidth,GameConfig.WINSIZE_HEIGHT=this.stage.stageHeight,GameConfig.WINSIZE_BILI_WIDTH=GameConfig.WINSIZE_WIDTH/1280,GameConfig.WINSIZE_BILI_HEIGHT=GameConfig.WINSIZE_HEIGHT/720,this.stage.orientation=egret.OrientationMode.LANDSCAPE,egret.Capabilities.isMobile?this.stage.scaleMode=egret.StageScaleMode.FIXED_NARROW:(this.stage.orientation=egret.OrientationMode.AUTO,this.stage.scaleMode=egret.StageScaleMode.SHOW_ALL)},i.prototype.checkVersion=function(){RES.web.Html5VersionController.prototype.getVirtualUrl=function(e){return ServerConfig.PATH_CONFIG.use_oss?e=e.match(".json")&&ServerConfig.PATH_CONFIG.json_path?ServerConfig.PATH_CONFIG.json_path+e+"?v="+GameConfig.RES_VERSION:ServerConfig.PATH_CONFIG.oss_path+e+"?v="+GameConfig.RES_VERSION:e.match("http")?e:e+="?v="+GameConfig.RES_VERSION},this.version=new RES.VersionController,RES.registerVersionController(this.version)},i.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup("preload")},i.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},i.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.isResourceLoadEnd=!0,this.createScene())},i.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},i.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},i.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},i.prototype.selectServerConfig=function(){var t=e.Utils.getURLQueryString("token");if(t&&(Global.playerProxy.token=t),ServerConfig.RECHARGE_URL=decodeURIComponent(e.Utils.getURLQueryString("op_pay_url")),ServerConfig.HOME_PAGE_URL=decodeURIComponent(e.Utils.getURLQueryString("op_home_url")),ServerConfig.HOME_PAGE_URL&&(ServerConfig.OP_RETURN_TYPE=decodeURIComponent(e.Utils.getURLQueryString("op_return_type"))),ServerConfig.gid=e.Utils.getURLQueryString("gid")||"",ServerConfig.USER_NAME=e.Utils.getURLQueryString("un")||null,!ServerConfig.USER_NAME){var i=egret.localStorage.getItem(GameConfig.DEFUALT_NAME);i||(i="test"+Math.floor(_.random(1e3,9999))),ServerConfig.USER_NAME=i}},i.prototype.checkIsFull=function(){var e=GameConfig.CURRENT_WIDTH,t=GameConfig.CURRENT_HEIGHT,i=this.stage.stageWidth,o=this.stage.stageHeight;if(GameConfig.CURRENT_ISSHU&&(e=GameConfig.CURRENT_HEIGHT,t=GameConfig.CURRENT_WIDTH,i=this.stage.stageHeight,o=this.stage.stageWidth),NativeApi.instance.isiOSDevice&&NativeApi.instance.isChromeForIOS){if(NativeApi.instance.isIphoneX)return void FrameUtils.iphoneXScreen(i,o);if(this.checkIsHengShu(),e!=this.stage.stageWidth||this.stage.stageHeight!=t)if(1280==e)1280!=i||(o>t?(this.isFullScreen=!1,FrameUtils.postMessage("0")):(this.isFullScreen=!0,FrameUtils.postMessage("1")));else if(720==t){if(NativeApi.instance.getIphoneBanben())return this.isFullScreen=!0,void FrameUtils.postMessage("1");720!=o||(i>e?(this.isFullScreen=!1,FrameUtils.postMessage("0")):(this.isFullScreen=!0,FrameUtils.postMessage("1")))}}},i.prototype.checkIsHengShu=function(){180===window.orientation||0===window.orientation?GameConfig.CURRENT_DIRECTION="portrait":90===window.orientation||-90===window.orientation?GameConfig.CURRENT_DIRECTION="landscape":GameConfig.CURRENT_DIRECTION="running"},i.prototype.startCreateScene=function(){this.stage.addEventListener(egret.Event.RESIZE,function(){var e=this;GameConfig.WINSIZE_WIDTH=this.stage.stageWidth,GameConfig.WINSIZE_HEIGHT=this.stage.stageHeight;var t={wBili:GameConfig.WINSIZE_BILI_WIDTH,hBili:GameConfig.WINSIZE_BILI_HEIGHT};GameConfig.WINSIZE_BILI_WIDTH=GameConfig.WINSIZE_WIDTH/1280,GameConfig.WINSIZE_BILI_HEIGHT=GameConfig.WINSIZE_HEIGHT/720,EventManager.instance.dispatch(EventNotify.EVENT_RESIZE,t),this.resetZise&&(egret.clearTimeout(this.resetZise),this.resetZise=null),this.resetZise=egret.setTimeout(function(){e.checkIsFull(),GameConfig.CURRENT_WIDTH=e.stage.stageWidth,GameConfig.CURRENT_HEIGHT=e.stage.stageHeight,e.resetZise=null},this,500)},this),e.DateTimeManager.instance.run();var t=document.getElementById("loadingDiv");t.parentNode.removeChild(t),document.body.style.background="#000000",e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_MAJIANG)},i}(eui.UILayer);e.Main=t,__reflect(t.prototype,"game.Main")}(game||(game={}));var RotationLoading=function(e){function t(){var i=e.call(this)||this;if(t._instance)throw new Error("SceneLoading使用单例");return i.skinName=new RotationLoadingSkin,i}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.load=function(e,t,i){this.width=GameConfig.curWidth(),this.height=GameConfig.curHeight(),this.progressLabel.text="0%",egret.Tween.removeTweens(this),egret.Tween.get(this.rotationImage,{loop:!0}).to({rotation:this.rotationImage.rotation+360},1500),this.resGroup=e,this.callback=i,GameLayerManager.gameLayer().loadLayer.addChild(this),this.beganLoadResGroup()},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.beganLoadResGroup=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(this.resGroup)},t.prototype.onResourceLoadComplete=function(e){e.groupName==this.resGroup&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.onResourceLoadOver())},t.prototype.onResourceProgress=function(e){if(e.groupName==this.resGroup){var t=Math.floor(e.itemsLoaded/e.itemsTotal*100);this.progressLabel.text=t+"%"}},t.prototype.onResourceLoadOver=function(){egret.Tween.removeTweens(this.rotationImage),game.UIUtils.removeFromParent(this),this.callback&&this.callback()},t}(game.BaseComponent);__reflect(RotationLoading.prototype,"RotationLoading");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function o(o){t.call(i,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var LoadingUI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.setProgress=function(e,t){},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,o){function r(e){t.call(o,e)}function n(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),i.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,n,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var BaseHeader=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.maskImage&&(this.headerImage.mask=this.maskImage)},t.prototype.setIndex=function(e){this.index=e},t.prototype.initWithPlayer=function(e){if(e){this.playerInfo=e,this.goldLabel.text=NumberFormat.formatGold_scence(e.gold),this.nameLabel.text=e.nickname;var t=e.figureUrl||e.figure_url,i=e.sex||e.sex;this.headerImage.source="nns_"+i+"_"+t+"_png"}else this.nameLabel.text=Global.playerProxy.playerData.nickname,this.headerImage.source="nns_"+Global.playerProxy.playerData.sex+"_"+Global.playerProxy.playerData.figure_url+"_png",this.goldLabel.text=NumberFormat.formatGold_scence(Global.playerProxy.playerData.gold);this.gold=Global.playerProxy.playerData.gold},t.prototype.onChange=function(){this.goldLabel.text=NumberFormat.formatGold_scence(this.gold)},t.prototype.updatePlayerGold=function(){},t.prototype.showIsZhuang=function(e){this.zhuangImage.visible=e,this.zhuangImage.scaleX=this.zhuangImage.scaleY=0,egret.Tween.get(this.zhuangImage).to({scaleX:0,scaleY:0},50).to({scaleX:1.2,scaleY:1.2},300).to({scaleX:1,scaleY:1},200)},t.prototype.headerMovie=function(e){switch(egret.Tween.removeTweens(this.headerImage),e){case 1:egret.Tween.get(this.headerImage).to({y:22.31},100).to({y:32.31},100);break;case 2:case 3:egret.Tween.get(this.headerImage).to({x:18.01},100).to({x:8.01},100);break;case 4:case 5:egret.Tween.get(this.headerImage).to({x:-2},100).to({x:8.01},100);break;case 6:egret.Tween.get(this.headerImage).to({x:21},100).to({x:11},100);break;case 7:egret.Tween.get(this.headerImage).to({x:165},100).to({x:175},100)}},t}(eui.Component);__reflect(BaseHeader.prototype,"BaseHeader");var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;e.touchChildren=!1,e.touchEnabled=!1;var i=new eui.Image("log_itembg_png");i.scale9Grid=new egret.Rectangle(25,25,1,1),e.addChild(i),i.horizontalCenter=0,i.verticalCenter=0,e.bg=i;var o=new eui.Label;return o.textAlign="center",o.lineSpacing=5,o.maxWidth=450,o.textColor=4460091,o.horizontalCenter=0,o.verticalCenter=0,e.label=o,e.addChild(o),e}return __extends(i,t),i.prototype.updateTxt=function(e,t){this.label.text=e,this.label.x=-this.label.width/2,this.label.y=20,this.bg.width=this.label.width+30,this.bg.height=this.label.height+24},i.popTip=function(t,o,r){void 0===o&&(o=1e3),void 0===r&&(r=!1);var n;i._pool.length>0?(n=i._pool.pop(),n.alpha=1):n=new i,n.updateTxt(t,r),n.x=(GameConfig.curWidth()-n.bg.width)/2,n.y=(GameConfig.curHeight()-n.bg.height)/2,GameLayerManager.gameLayer().effectLayer.addChild(n),egret.Tween.get(n).to({y:n.y-50},100,egret.Ease.backOut).wait(300).to({y:n.y-180,alpha:0},2e3).call(function(){e.UIUtils.removeSelf(n),i._pool.length<50&&i._pool.push(n)})},i._pool=[],i}(eui.Group);e.ToastTip=t,__reflect(t.prototype,"game.ToastTip")}(game||(game={}));var majiang;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t}(eui.Component);e.MineKoupai=t,__reflect(t.prototype,"majiang.MineKoupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(t,i,o,r){var n=e.call(this)||this;return n.nuberTime=[],n.type=t,n.color=i,n.pbg=r,1==o?(n.skinName=new MjLeftPgSkin,n.times=1):2==o?(n.skinName=new MjLeftPgSkin2,n.times=2):3==o?(n.skinName=new MjLeftPgSkin3,n.times=3):4==o&&(n.skinName=new MjLeftPgSkin4,n.times=4),n}return __extends(t,e),t.prototype.createChildren=function(){switch(e.prototype.createChildren.call(this),this.leftRectGroup.visible=!1,this.times){case 1:this.showType(this.type,1);break;case 2:this.showType(this.type,4);break;case 3:this.showType(this.type,7);break;case 4:this.showType(this.type,10)}},t.prototype.showType=function(e,t){switch(this.type){case 5:this.showColor();break;case 3:case 1:this.p_1_img.source,this.p_2_img.source,this.p_3_img.source,this.p_4_img.source,this.showColor_m();break;case 2:case 4:this.p_1.source="left_angang_"+t+"_png",this.p_2.source="left_angang_"+(t+1)+"_png",this.p_3.source="left_angang_"+(t+2)+"_png",this.showColor_a()}},t.prototype.showColor=function(){this.p_4.visible=!1,this.p_4_img.visible=!1,this.p_1_img.source="color_value_"+this.color+"_png",this.p_2_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_m=function(){this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_pbg=function(){this.p_4.visible=!0,this.p_4_img.visible=!0,this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_a=function(){this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showRect=function(e){0==e?this.leftRectGroup.visible=!1:this.leftRectGroup.visible=!0},t.prototype.dianpaoAni=function(){var e=game.MCUtils.getMc("hu_up1"),t=game.MCUtils.getMc("hu_up2");this.addChild(t),this.addChild(e),t.scaleX=t.scaleX=1.5,t.x=this.width/2,t.y=this.height/2,e.scaleX=e.scaleY=1.5,e.x=this.width/2,e.y=this.height/2-20,e.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(e)},this),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(t)},this),e.play(1),t.play(1)},t}(eui.Component);e.MjLeftPg=t,__reflect(t.prototype,"majiang.MjLeftPg")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(t,i,o,r){var n=e.call(this)||this;return n.type=t,n.color=i,n.pbg=r,1==o?(n.skinName=new MjRightPgSkin4,n.times=1):2==o?(n.skinName=new MjRightPgSkin3,n.times=2):3==o?(n.skinName=new MjRightPgSkin2,n.times=3):4==o&&(n.skinName=new MjRightPgSkin,n.times=4),n}return __extends(t,e),t.prototype.createChildren=function(){switch(e.prototype.createChildren.call(this),this.rightRectGroup.visible=!1,this.times){case 1:this.showType(this.type,10);break;case 2:this.showType(this.type,7);break;case 3:this.showType(this.type,4);break;case 4:this.showType(this.type,1)}},t.prototype.showType=function(e,t){switch(this.type){case 5:this.showColor();break;case 3:case 1:this.p_1_img.source,this.p_2_img.source,this.p_3_img.source,this.p_4_img.source,this.showColor_m();break;case 2:case 4:this.p_1.source="right_angang_"+t+"_png",this.p_2.source="right_angang_"+(t+1)+"_png",this.p_3.source="right_angang_"+(t+2)+"_png",this.showColor_a()}},t.prototype.showColor=function(){this.p_4.visible=!1,this.p_4_img.visible=!1,this.p_1_img.source="color_value_"+this.color+"_png",this.p_2_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_m=function(){this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_pbg=function(){this.p_4.visible=!0,this.p_4_img.visible=!0,this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_a=function(){this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showRect=function(e){0==e?this.rightRectGroup.visible=!1:this.rightRectGroup.visible=!0},t.prototype.dianpaoAni=function(){var e=game.MCUtils.getMc("hu_up1"),t=game.MCUtils.getMc("hu_up2");this.addChild(t),this.addChild(e),t.scaleX=t.scaleX=1.5,t.x=this.width/2,t.y=this.height/2,e.scaleX=e.scaleY=1.5,e.x=this.width/2,e.y=this.height/2-20,e.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(e)},this),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(t)},this),e.play(1),t.play(1)},t}(eui.Component);e.MjRightPg=t,__reflect(t.prototype,"majiang.MjRightPg")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(t,i,o,r){var n=e.call(this)||this;return n.type=t,n.color=i,n.pbg=r,1==o?(n.skinName=new MjShangPgSkin4,n.times=1):2==o?(n.skinName=new MjShangPgSkin3,n.times=2):3==o?(n.skinName=new MjShangPgSkin2,n.times=3):4==o&&(n.skinName=new MjShangPgSkin,n.times=4),n}return __extends(t,e),t.prototype.createChildren=function(){switch(e.prototype.createChildren.call(this),this.topRectGroup.visible=!1,this.times){case 1:this.showType(this.type,10);break;case 2:this.showType(this.type,7);break;case 3:this.showType(this.type,4);break;case 4:this.showType(this.type,1)}},t.prototype.showType=function(e,t){switch(this.type){case 5:this.showColor();break;case 3:case 1:this.p_1_img.source,this.p_2_img.source,this.p_3_img.source,this.p_4_img.source,this.showColor_m();break;case 2:case 4:this.p_1.source="top_angang_"+t+"_png",this.p_2.source="top_angang_"+(t+1)+"_png",this.p_3.source="top_angang_"+(t+2)+"_png",this.showColor_a()}},t.prototype.showColor=function(){this.p_4.visible=!1,this.p_4_img.visible=!1,this.p_1_img.source="color_value_"+this.color+"_png",this.p_2_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_m=function(){this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_pbg=function(){this.p_4.visible=!0,this.p_4_img.visible=!0,this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_a=function(){this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showRect=function(e){0==e?this.topRectGroup.visible=!1:this.topRectGroup.visible=!0},t.prototype.dianpaoAni=function(){var e=game.MCUtils.getMc("hu_up1"),t=game.MCUtils.getMc("hu_up2");this.addChild(t),this.addChild(e),t.scaleX=t.scaleX=1.5,t.x=this.width/2,t.y=this.height/2,e.scaleX=e.scaleY=1.5,e.x=this.width/2,e.y=this.height/2-20,e.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(e)},this),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(t)},this),e.play(1),t.play(1)},t}(eui.Component);e.MjShangPg=t,__reflect(t.prototype,"majiang.MjShangPg")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(t,i,o,r){var n=e.call(this)||this;return n.color=i,n.type=t,n.pbg=r,1==o?(n.skinName=new MjziPgSkin,n.times=1):2==o?(n.skinName=new MjziPgSkin2,n.times=2):3==o?(n.skinName=new MjziPgSkin3,n.times=3):4==o&&(n.skinName=new MjziPgSkin4,n.times=4),n}return __extends(t,e),t.prototype.createChildren=function(){switch(e.prototype.createChildren.call(this),this.mineRectGroup.visible=!1,this.times){case 1:this.showType(this.type,1);break;case 2:this.showType(this.type,4);break;case 3:this.showType(this.type,7);break;case 4:this.showType(this.type,10)}},t.prototype.showType=function(e,t){switch(this.type){case 5:this.showColor();break;case 3:case 1:this.p_1_img.source,this.p_2_img.source,this.p_3_img.source,this.p_4_img.source,this.showColor_m();break;case 2:case 4:this.p_1.source="mine_angang_"+t+"_png",this.p_2.source="mine_angang_"+(t+1)+"_png",this.p_3.source="mine_angang_"+(t+2)+"_png",this.showColor_a()}},t.prototype.showColor=function(){this.p_4.visible=!1,this.p_4_img.visible=!1,this.p_1_img.source="color_value_"+this.color+"_png",this.p_2_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_m=function(){this.p_4.visible=!0,this.p_4_img.visible=!0,this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_pbg=function(){this.p_4.visible=!0,this.p_4_img.visible=!0,this.p_1_img.source="color_value_"+this.color+"_png",this.p_3_img.source="color_value_"+this.color+"_png",this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showColor_a=function(){this.p_4_img.source="color_value_"+this.color+"_png"},t.prototype.showRect=function(e){0==e?this.mineRectGroup.visible=!1:this.mineRectGroup.visible=!0},t.prototype.dianpaoAni=function(){var e=game.MCUtils.getMc("hu_up1"),t=game.MCUtils.getMc("hu_up2");this.addChild(t),this.addChild(e),t.scaleX=t.scaleX=1.5,t.x=this.width/2,t.y=this.height/2,e.scaleX=e.scaleY=1.5,e.x=this.width/2,e.y=this.height/2-20,e.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(e)},this),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(t)},this),e.play(1),t.play(1)},t}(eui.Component);e.MjziPg=t,__reflect(t.prototype,"majiang.MjziPg")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.currentNumber=1,t.startNumber=1,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.showPaiQiang=function(e,t,i){var o=t,r=i,n=r[0]+r[1],a=r[0],s=e[o];switch(s){case"mine":switch(n){case 1:case 5:case 9:this.startNumber=1;break;case 2:case 6:case 10:this.startNumber=83;break;case 3:case 7:case 11:this.startNumber=55;break;case 4:case 6:case 12:this.startNumber=29}break;case"left":switch(n){case 1:case 5:case 9:this.startNumber=29;break;case 2:case 6:case 10:this.startNumber=1;break;case 3:case 7:case 11:this.startNumber=83;break;case 4:case 6:case 12:this.startNumber=55}break;case"top":switch(n){case 1:case 5:case 9:this.startNumber=55;break;case 2:case 6:case 10:this.startNumber=29;break;case 3:case 7:case 11:this.startNumber=1;break;case 4:case 6:case 12:this.startNumber=83}break;case"right":switch(n){case 1:case 5:case 9:this.startNumber=83;break;case 2:case 6:case 10:this.startNumber=55;break;case 3:case 7:case 11:this.startNumber=29;break;case 4:case 6:case 12:this.startNumber=1}}this.startNumber+=2*a,this.currentNumber=this.startNumber},t.prototype.reloadPaiQiang=function(e){for(var t=0;108-e>t;t++)this.removeNumByIndex()},t.prototype.removeNumByIndex=function(){var e=this["pai"+this.currentNumber];e&&(game.UIUtils.removeSelf(e),e=null,this.currentNumber+=1,this.currentNumber>108&&(this.currentNumber=1))},t.prototype.removePaiByOfferset=function(e){this.currentNumber=this.currentNumber+e,this.removeNumByIndex()},t.prototype.getPaiQiangNum=function(){return this.leftGroup.numChildren+this.rightGroup.numChildren+this.topGroup.numChildren+this.mineGroup.numChildren},t.prototype.hidePaiQiang=function(){this.leftGroup.visible=this.topGroup.visible=this.rightGroup.visible=this.mineGroup.visible=!1},t}(eui.Component);e.PaiQiangComponent=t,__reflect(t.prototype,"majiang.PaiQiangComponent")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.initWithTask=function(t){this.taskArr=t,this.itemGroup.removeChildren();for(var i=0;i<t.length;i++){var o=new e.SelectGangItem(t[i].card);this.itemGroup.addChild(o)}this.bgImage.width=this.itemGroup.width+36,this.visible=!0},i.prototype.hide=function(){this.taskArr=null,this.itemGroup.removeChildren(),this.visible=!1},i.prototype.getMaxWidth=function(){return this.bgImage.width+50},i}(eui.Component);e.SelectGang=t,__reflect(t.prototype,"majiang.SelectGang")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.changeToUnLight()},t.prototype.changeToUnLight=function(){this.leftBg.visible=this.rightBg.visible=this.mineBg.visible=this.topBg.visible=!1},t.prototype.showLightByDirection=function(e){this.changeToUnLight(),this[e+"Bg"].visible=!0,this.removeAllTween(),egret.Tween.get(this[e+"Bg"],{loop:!0}).to({alpha:.5},300).to({alpha:1},300)},t.prototype.removeAllTween=function(){egret.Tween.removeTweens(this.leftBg),this.leftBg.alpha=1,egret.Tween.removeTweens(this.rightBg),this.rightBg.alpha=1,egret.Tween.removeTweens(this.topBg),this.topBg.alpha=1,egret.Tween.removeTweens(this.mineBg),this.mineBg.alpha=1},t.prototype.startTime=function(e){this.root=e,game.UpdateTickerManager.instance.add(this)},t.prototype.update=function(e){if(Global.gameProxy.roomInfo&&Global.gameProxy.roomInfo.countdown){var t=Global.gameProxy.roomInfo.countdown.end,i=game.DateTimeManager.instance.now,o=t-i;if(0>=o)return void(this.timeLabel1.text="00");this.timeLabel1.text=NumberFormat.getTimeStr(o)}},t.prototype.removeTimer=function(){game.UpdateTickerManager.instance.remove(this)},t}(eui.Component);e.TimerDirectionBar=t,__reflect(t.prototype,"majiang.TimerDirectionBar",["IUpdate"])}(majiang||(majiang={}));var GameConfig;!function(e){function t(){var e=window.navigator.userAgent.toLowerCase();""+e.match(/MicroMessenger/i);return""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void LogUtils.logD("未知系统类型")}function i(){var e=window.navigator.userAgent.toLowerCase();return""+e.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+e.match(/qzone/i)=="qzone"?"qzone":""+e.match(/weibo/i)=="weibo"?"weibo":""+e.match(/qq/i)=="qq"?"qq":""+e.match(/renren/i)=="renren"?"renren":""+e.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+e.match(/douban/i)=="douban"?"douban":"other"}function o(){return egret.MainContext.instance.stage}function r(){return egret.MainContext.instance.stage.stageWidth}function n(){return egret.MainContext.instance.stage.stageHeight}e.WINSIZE_WIDTH=1280,e.WINSIZE_HEIGHT=720,e.CURRENT_WIDTH=1280,e.CURRENT_HEIGHT=720,e.PC_WINSIZE_WIDTH=1280,e.PC_WINSIZE_HEIGHT=720,e.WINSIZE_BILI_WIDTH=1,e.WINSIZE_BILI_HEIGHT=1,e.IS_RUNNING=!0,e.CURRENT_DIRECTION="landscape",e.CURRENT_ISSHU=!1,e.systemType=t,e.platformType=i,e.curStage=o,e.curWidth=r,e.curHeight=n,e.time_config={500:500,200:100,100:100,1e3:1e3,300:300,400:400},e.MUSIC_NAME="music_flag1",e.SOUND_NAME="sound_flag1",e.DEFUALT_NAME="login_name3"}(GameConfig||(GameConfig={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.chupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.sortByJieGou=function(){var e=[6,5,4,3,2,1,0];this.sortByXIndexByGroup(e,this.group1),this.sortByXIndexByGroup(e,this.group2),this.sortByXIndexByGroup(e,this.group3)},i.prototype.createByArr1=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];o.task||t.push(e[i])}this.createByArr(t)},i.prototype.createByArr=function(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.card;this.createMineChupaiByIndex(t,o)}this.sortByJieGou()},i.prototype.createMineChupaiByIndex=function(t,i){var o,r=Math.floor(t/7)+1,n=t%7+1;return 3>=r?(o=new e.LeftChupai(i,r,n),this["group"+r].addChild(o),o.setByRecord(this.recordsJson[t+1]),o.settingColors(t+1)):(r=3,o=new e.LeftChupai(i,3,n),o.useBgSouce(),o.x=-49-4*(t-20),o.y=170+31*(t-20),this.group3.addChild(o)),this.chupais.push(o),o},i.prototype.addChupai=function(e){var t=this.chupais.length;return this.createMineChupaiByIndex(t,e)},i.prototype.sortByXIndexByGroup=function(e,t){var i=[],o=t.numChildren;t.numChildren>e.length&&(o=e.length);for(var r=0;o>r;r++){var n=t.getChildByName("mj"+e[r]);n&&i.push(n)}for(var r=0;r<i.length;r++)t.addChild(i[r])},i}(e.BaseChupaiGroup);e.LeftChupaiGroup=t,__reflect(t.prototype,"majiang.LeftChupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.chupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.sortByJieGou=function(){var e=[0,1,2,3,6,5,4];this.sortByXIndexByGroup(e,this.group1),this.sortByXIndexByGroup(e,this.group2),this.sortByXIndexByGroup(e,this.group3)},i.prototype.createByArr1=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];
o.task||t.push(e[i])}this.createByArr(t)},i.prototype.createByArr=function(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.card;this.createMineChupaiByIndex(t,o)}this.sortByJieGou()},i.prototype.createMineChupaiByIndex=function(t,i){var o,r=Math.floor(t/7)+1,n=t%7+1;return 3>=r?(o=new e.MineChupai(i),o.initWithIndex(n),this["group"+r].addChild(o),o.setByRecord(this.recordsJson[t+1]),o.settingColors(t+1)):(o=new e.MineChupai(i),o.initWithIndex(21),o.settingColors(21),r=3,o.skewX=-1,o.x=266+45*(t-20),o.y=8,this.group3.addChild(o)),this.chupais.push(o),o},i.prototype.addChupai=function(t){var i=(new e.MineChupai(t),this.chupais.length);return this.createMineChupaiByIndex(i,t)},i.prototype.sortByXIndexByGroup=function(e,t){var i=[],o=t.numChildren;t.numChildren>e.length&&(o=e.length);for(var r=0;o>r;r++){var n=t.getChildByName("mj"+e[r]);n&&i.push(n)}for(var r=0;r<i.length;r++)t.addChild(i[r])},i}(e.BaseChupaiGroup);e.MineChupaiGroup=t,__reflect(t.prototype,"majiang.MineChupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.chupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.sortByJieGou=function(){this.sortByXIndexByGroup(this.group1),this.sortByXIndexByGroup(this.group2),this.sortByXIndexByGroup(this.group3)},i.prototype.createByArr1=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];o.task||t.push(e[i])}this.createByArr(t)},i.prototype.createByArr=function(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.card;this.createMineChupaiByIndex(t,o)}this.sortByJieGou()},i.prototype.createMineChupaiByIndex=function(t,i){var o,r=Math.floor(t/7)+1,n=t%7+1;return 3>=r?(o=new e.RightChupai(i,r,n),this["group"+r].addChild(o),o.setByRecord(this.recordsJson[t+1]),o.index=t,o.settingColors(t+1)):(r=3,o=new e.RightChupai(i,3,n),o.useBgSouce(),o.x=14-3*(t-20),o.y=-28*(t-20),this.group3.addChild(o),o.index=t),this.chupais.push(o),o},i.prototype.addChupai=function(e){var t=this.chupais.length,i=this.createMineChupaiByIndex(t,e);return this.sortByJieGou(),i},i.prototype.sortByXIndexByGroup=function(e){for(var t=this.chupais.length-1;t>=0;t--)this.chupais[t].parent.addChild(this.chupais[t])},i}(e.BaseChupaiGroup);e.RightChupaiGroup=t,__reflect(t.prototype,"majiang.RightChupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.chupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.sortByJieGou=function(){var e=[0,1,2,3,6,5,4];this.sortByXIndexByGroup(e,this.group1),this.sortByXIndexByGroup(e,this.group2),this.sortByXIndexByGroup(e,this.group3)},i.prototype.createByArr1=function(e){for(var t=[],i=0;i<e.length;i++){var o=e[i];o.task||t.push(e[i])}this.createByArr(t)},i.prototype.createByArr=function(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.card;this.createMineChupaiByIndex(t,o)}this.sortByJieGou()},i.prototype.createMineChupaiByIndex=function(t,i){var o,r=Math.floor(t/7)+1;return 3>=r?(o=new e.TopChupai(i),o.initWithIndex(r),this["group"+r].addChild(o),o.setByRecord(this.recordsJson[t+1]),o.settingColors(t+1)):(o=new e.TopChupai(i),o.initWithIndex(21),r=3,o.y=-1,o.x=37*-(t-20),this.group3.addChild(o)),this.chupais.push(o),o},i.prototype.addChupai=function(e){var t=this.chupais.length;return this.createMineChupaiByIndex(t,e)},i.prototype.sortByXIndexByGroup=function(e,t){var i=[],o=t.numChildren;t.numChildren>e.length&&(o=e.length);for(var r=0;o>r;r++){var n=t.getChildByName("mj"+e[r]);n&&i.push(n)}for(var r=0;r<i.length;r++)t.addChild(i[r])},i}(e.BaseChupaiGroup);e.TopChupaiGroup=t,__reflect(t.prototype,"majiang.TopChupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.skinName=new HuTipsBarSkin,e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.visible=!1,this.horizontalCenter=0,this.bottom=150},i.prototype.showBar=function(t){this.itemGroup.removeChildren();for(var i=0;i<t.length;i++){var o=t[i],r=new e.HuTipsItem(o);this.itemGroup.addChild(r)}this.bgImage.width=this.itemGroup.width+36,this.visible=t.length>0},i.prototype.hideBar=function(){this.itemGroup.removeChildren(),this.visible=!1},i}(eui.Component);e.HuTipsBar=t,__reflect(t.prototype,"majiang.HuTipsBar")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i){var o=t.call(this)||this;return o.majiangData=i,o.skinName=new e.HuTipsItemSkin,o}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.pai.changeColor(this.majiangData.value),this.syLabel.text=this.majiangData.count,0==this.majiangData.fan?this.fanLabel.text="1":this.fanLabel.text=Math.pow(2,this.majiangData.fan)+"",this.majiangData.count<1&&(this.pai.alpha=.5)},i}(eui.Component);e.HuTipsItem=t,__reflect(t.prototype,"majiang.HuTipsItem")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i,o){var r=t.call(this)||this;switch(r.value=o,r.colorStr="color_value_`VALUE`_png",r.direction=i,i){case"mine":r.skinName=new e.MineHupaiSkin;break;case"left":r.skinName=new e.LeftHupaiSkin;break;case"right":r.skinName=new e.RightHupaiSkin;break;case"top":r.skinName=new e.TopHupaiSkin}return r}return __extends(i,t),i.prototype.showMaskRect=function(e){this.maskRect.visible=this.value==e},i.prototype.createChildren=function(){t.prototype.createChildren.call(this);var e=this.colorStr.replace("`VALUE`",this.value+"");this.colorImage.source=RES.getRes(e),this.maskRect.mask=this.bgImage1},i.prototype.showZimo=function(){var e=this;this.alpha=1;var t="zimohu",i=GameCacheManager.instance.getMcCache("zimohu",this.direction+"_"+t,null);this.maskRect.alpha=this.bgImage.alpha=0,this.colorImage.alpha=0,this.addChild(this.bgImage),this.addChild(this.colorImage),this.addChild(this.maskRect),this.addChild(i),i.scaleX=i.scaleX=1.5,i.x=this.width/2,"mine"==this.direction||"right"==this.direction?i.y=this.height/2-30:i.y=this.height/2,i.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(i),e.maskRect.alpha=1},this),i.play(1),egret.setTimeout(function(){egret.Tween.get(e.bgImage).to({alpha:1},100),egret.Tween.get(e.colorImage).to({alpha:1},100)},this,200)},i.prototype.showDianpao=function(){var e=GameCacheManager.instance.getMcCache("hu_down1",this.direction+"_hu_down1",null),t=GameCacheManager.instance.getMcCache("hu_down2",this.direction+"_hu_down2",null);this.addChild(t),this.addChild(this.bgImage),this.addChild(this.colorImage),this.addChild(this.maskRect),this.addChild(e);var i=this.alpha;this.alpha=0,t.scaleX=t.scaleX=1.5,t.x=this.width/2,t.y=this.height/2,e.scaleX=e.scaleY=1.5,e.x=this.width/2,e.y=this.height/2-20,e.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(e)},this),t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(t)},this),egret.Tween.get(this).to({alpha:i},50),e.play(1),t.play(1)},i}(eui.Component);e.MajiangHupai=t,__reflect(t.prototype,"majiang.MajiangHupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i.majiangs=[],i}return __extends(i,t),i.prototype.onAdded=function(){t.prototype.onAdded.call(this),EventManager.instance.addEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this),EventManager.instance.removeEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.findColor=function(e){for(var t=e.data,i=0;i<this.majiangs.length;i++)this.majiangs[i].showMaskRect(t)},i.prototype.initWithDirection=function(e){this.direction=e,this.positions=this.createRecords()},i.prototype.createRecords=function(){switch(this.records={},this.direction){case"mine":return[{x:0,y:0},{x:44,y:0},{x:88,y:0}];case"left":return[{x:0,y:0},{x:-5.5,y:37},{x:-11,y:75}];case"right":return[{x:9,y:48},{x:4.5,y:24},{x:0,y:0}];case"top":return[{x:70,y:0},{x:35,y:0},{x:0,y:0}]}},i.prototype.initWithArr=function(e){for(var t=0;t<e.length;t++){var i=e[t];this.addHu(i)}},i.prototype.addHu=function(t,i){void 0===i&&(i=0);var o=t,r=new e.MajiangHupai(this.direction,o);0==t.mainCard&&(r.alpha=.7);var n=this.majiangs.length,a=Math.floor(n/3),s=n%3;switch(r.index=n+1,this.addChild(r),this.majiangs.push(r),this.direction){case"mine":r.x=this.positions[s].x+5*a,r.y=this.positions[s].y+-17*a;break;case"left":r.x=this.positions[s].x+-4*a,r.y=this.positions[s].y+-18*a;break;case"right":r.x=this.positions[s].x+4*a,r.y=this.positions[s].y+-18*a;break;case"top":r.x=this.positions[s].x+-2*a,r.y=this.positions[s].y+-20*a}switch(this.resetZorder(),i){case 1:r.showDianpao();break;case 2:r.alpha=0,r.showZimo()}},i.prototype.resetZorder=function(){switch(this.direction){case"mine":var e=_.groupBy(this.majiangs,"y");for(var t in e)for(var i=e[t].length-1;i>=0;i--)this.addChild(e[t][i]);break;case"left":break;case"right":var e=_.groupBy(this.majiangs,function(e){return Math.floor((e.index-1)/3)});for(var t in e)for(var i=e[t].length-1;i>=0;i--)this.addChild(e[t][i]);break;case"top":var e=_.groupBy(this.majiangs,"y");for(var t in e)for(var i=e[t].length-1;i>=0;i--)this.addChild(e[t][i])}},i}(game.BaseUI);e.MajiangHupaiGroup=t,__reflect(t.prototype,"majiang.MajiangHupaiGroup")}(majiang||(majiang={}));var LoadingScene=function(e){function t(){var i=e.call(this)||this;if(t._instance)throw new Error("SceneLoading使用单例");return i.skinName=new LoadingSkin,i}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.load=function(e,t,i){this.resGroup=e,this.callback=i,GameLayerManager.gameLayer().loadLayer.addChild(this),this.beganLoadResGroup()},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.beganLoadResGroup=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(this.resGroup)},t.prototype.onResourceLoadComplete=function(e){e.groupName==this.resGroup&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.onResourceLoadOver())},t.prototype.onResourceProgress=function(e){e.groupName==this.resGroup},t.prototype.onResourceLoadOver=function(){game.UIUtils.removeFromParent(this),this.callback&&this.callback()},t}(game.BaseComponent);__reflect(LoadingScene.prototype,"LoadingScene");var majiang;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.skinName=new e.RecordBarSkin,i}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.scroller.scrollPolicyH="off",this.recordList.dataProvider=null,this.recordList.itemRenderer=e.RecordItemRender,this.visible=!1},i.prototype.show=function(){var e=Global.gameProxy.getMineGameData().bills||[],t=_.filter(e,function(e){return e.type>0});this.recordList.dataProvider=new eui.ArrayCollection(t),this.visible=!0;for(var i=0,o=0;o<t.length;o++)i+=e[o].info.gainGold;var r=i>0?"+"+i.toFixed(2):i.toFixed(2);this.recordLabel.text="总输赢 : "+r},i.prototype.hide=function(){this.visible=!1},i}(game.BaseUI);e.RecordBar=t,__reflect(t.prototype,"majiang.RecordBar")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.skinName=new e.RecordItemSkin,i}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.beishuLabel.visible=!1},i.prototype.dataChanged=function(){this.updateShow(this.data)},i.prototype.updateShow=function(t){var i=t.type,o=t.info,r=o.gainGold,n=Global.gameProxy.getMineIndex();1==i?this.typeLabel.text=e.MajiangUtils.getGangTypeStr(o.gangType,r):2==i?this.typeLabel.text=e.MajiangUtils.getHuTypeStr(i,r,o.from,n):6==i?this.typeLabel.text="呼叫转移":this.typeLabel.text=e.MajiangUtils.getBiliTypeStr(i,r,o.from),this.valueLabel.text=r>0?"+"+r:r,this.changeColor(r)},i.prototype.changeColor=function(e){var t=16777215;e>0&&(t=16774953),this.valueLabel.textColor=this.beishuLabel.textColor=this.typeLabel.textColor=t},i}(game.BaseItemRender);e.RecordItemRender=t,__reflect(t.prototype,"majiang.RecordItemRender")}(majiang||(majiang={}));var Global;!function(e){}(Global||(Global={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.shoupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.initWithArr=function(i,o){void 0===o&&(o=!0),t.prototype.clearGroup.call(this);for(var r=1;i>=r;r++){var n=new e.LeftShoupai;this.mainGroup.addChild(n);var a=this.recordsJson[r];game.UIUtils.setAnchorPot(n),n.changeBgResource(a.source),this.shoupais.push(n),n.visible=o,n.x=a.x,n.y=a.y,n.name=a.name}this.mopai=new e.LeftShoupai,game.UIUtils.setAnchorPot(this.mopai),this.mainGroup.addChild(this.mopai),this.mopai.name="mopai",this.mopai.visible=!1},i.prototype.removeShoupaiByPeng=function(){this.removeLastPai(),this.removeLastPai()},i.prototype.changeColorWithArr=function(e){for(var t=(Global.gameProxy.getPlayerByIndex(this.index).selectColor,Global.gameProxy.getPlayerByIndex(this.index).huCards.length>0,0);t<e.length;t++){var i=e[t],o=this.mainGroup.getChildByName("mj"+(t+1)),r=this.recordsJson[t+1];o&&(o.x=r.x+1,o.y=r.y,o.visible=!0,o.showColor(i))}},i.prototype.setPointByIndex=function(e){var t=this.recordsJson[e];this.mopai.x=t.x+1,this.mopai.y=t.y+20,this.mopai.changeBgResource(t.source)},i.prototype.playerMopai=function(e){var t=(this.createShoupai(this.mainGroup.numChildren),this.mainGroup.numChildren),i=this.createShoupai(t+1),o=this.recordsJson[t];i.changeBgResource(o.source),i.x=o.x,i.y=o.y-30,i.visible=!0},i.prototype.createShoupai=function(t){var i=new e.LeftShoupai;this.mainGroup.addChild(i);var o=this.recordsJson[t];return i.changeBgResource(o.source),i.x=o.x,i.y=o.y,i.name=o.name,i},i}(e.BaseShoupaiGroup);e.LeftShoupaiGroup=t,__reflect(t.prototype,"majiang.LeftShoupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.shoupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.onAdded=function(){t.prototype.onAdded.call(this),EventManager.instance.addEvent(EventNotify.SHOUPAI_TOUCH_SUC,this.shoupaiTouchOn,this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this),EventManager.instance.removeEvent(EventNotify.SHOUPAI_TOUCH_SUC,this.shoupaiTouchOn,this)},i.prototype.sortShoupais=function(){var e=Global.gameProxy.getMineGameData(),t=e.selectColor;this.shoupais=_.sortBy(this.shoupais,function(e){return Math.floor(e.value/10)==t?40+e.value:e.value});for(var i=Global.gameProxy.getMineShuopaiArr(),o=0;o<this.shoupais.length;o++){var r=this.shoupais[o],n=i.indexOf(r.value);i[n]=-1,r.name="mj"+(n+1);var a=this.recordsJson[n+1];a&&(r.setPosition(n+1),egret.Tween.get(r).to({x:a.x},300,egret.Ease.quintOut))}this.checkShoupaiError()},i.prototype.sortShoupaisByChupai=function(e){if(void 0===e&&(e=null),this.mopai!=this.lastTouchPai){e&&(this.mopai.value==e?this.lastTouchPai=this.mopai:this.lastTouchPai=this.findMajiangByValue(e));var t=Global.gameProxy.getMineGameData().selectColor;this.lastTouchPai&&(this.lastTouchPai.visible=!0,this.lastTouchPai.x=this.mopai.x,this.lastTouchPai.y=this.mopai.y,this.lastTouchPai.resetValue(this.mopai.value),this.lastTouchPai.colorIsLight(t),this.lastTouchPai=null),this.mopai.visible=!1;for(var i=Global.gameProxy.getMineShuopaiArr(),o=0;o<this.shoupais.length;o++){var r=this.shoupais[o];r.visible=!0;var n=i.indexOf(r.value);i[n]=-1,r.name="mj"+(n+1);var a=this.recordsJson[n+1];a&&(r.setPosition(n+1),r.colorIsLight(t),egret.Tween.get(r).to({x:a.x,y:a.y},300,egret.Ease.quintOut))}this.checkShoupaiError()}},i.prototype.shoupaiTouchOn=function(e){this.lastTouchPai=e.data,this.lastIndex=-1;for(var t=0;14>=t;t++){var i=this.mainGroup.getChildByName("mj"+(t+1));if(i&&i==this.lastTouchPai){this.lastIndex=t+1;break}}},i.prototype.initWithArr=function(i,o){void 0===o&&(o=!0),t.prototype.clearGroup.call(this);for(var r=Global.gameProxy.getMineGameData().selectColor,n=0;n<i.length;n++){var a=n,s=i[a],h=this.createShoupai(a,s);h.setPosition(a),h.visible=o,h.colorIsLight(r)}this.mopai=new e.MineShoupai(0),this.mainGroup.addChild(this.mopai),this.mopai.visible=!1,this.mopai.name="mopai",this.mopai.setPosition(-1),game.UIUtils.setAnchorPot(this.mopai),this.mopai.y=this.mopai.anchorOffsetY},i.prototype.createShoupai=function(t,i){var o=new e.MineShoupai(parseInt(i));this.shoupais.push(o),this.mainGroup.addChild(o);var r=this.recordsJson[t+1];return game.UIUtils.setAnchorPot(o),o.x=r.x,o.y=o.anchorOffsetY,o.name=r.name,o.visible=!1,o},i.prototype.sortShoupaiByValue=function(e,t){void 0===t&&(t=!0);for(var i=Global.gameProxy.getMineGameData().selectColor,o=Global.gameProxy.getMineGameData().huCards.length>0,r=0;r<e.length;r++){var n=e[r],a=this.mainGroup.getChildByName("mj"+(r+1)),s=this.recordsJson[r+1];a&&(a.visible=!0,a.resetValue(n),o||a.colorIsLight(i),t?egret.Tween.get(a).to({x:s.x,y:s.y},300,egret.Ease.quintOut):(a.x=s.x,a.y=s.y))}},i.prototype.sortShoupaiByMopai=function(e){for(var t=Global.gameProxy.getMineGameData().selectColor,i=0;i<this.shoupais.length;i++){var o=this.shoupais[i],r=e.indexOf(o.value);e[r]=-1;var n=this.recordsJson[r+1];o.visible=!0,o.x=n.x,o.y=n.y,o.colorIsLight(t)}this.checkShoupaiError()},i.prototype.changeShoupaiValue=function(e,t){var i=this.mainGroup.getChildByName(e);i.resetValue(t)},i.prototype.findMajiangByValue=function(e){for(var t=0;t<this.shoupais.length;t++){var i=this.shoupais[t];if(i.value==e)return i}return null},i.prototype.hideRight3pais=function(){var e=Global.gameProxy.getMineShuopaiArr(),t=Global.gameProxy.getMineGameData().selectedHSZCards;game.Utils.removeArrayItem(e,t[0]),game.Utils.removeArrayItem(e,t[1]),game.Utils.removeArrayItem(e,t[2]),e=e.concat(t),this.sortShoupaiByValue(e);var i=14;this.mainGroup.getChildByName("mj"+i)||(i=13);for(var o=i;o>i-3;o--)this.mainGroup.getChildByName("mj"+o).visible=!1},i.prototype.randomChoseThree=function(){return _.groupBy(this.shoupais,function(e){return Math.floor(e.value/10)})},i.prototype.sortMineShoupai=function(){var e=Global.gameProxy.getMineShuopaiArr();this.sortShoupaiByMopai(e)},i.prototype.playerNewCardPush=function(e){this.lastTouchPai=null,this.mopai.resetValue(e),this.showMopai(!0)},i.prototype.showMopai=function(e){var t=this;this.setPointByIndex(this.shoupais.length+1);for(var i=0;i<this.shoupais.length;i++)0==this.shoupais[i].visible&&(this.shoupais[i].visible=!0);var o=this.mopai,r=this.recordsJson[this.shoupais.length+1];r&&(o.x=r.x+o.width/2,o.y=o.anchorOffsetY);var n=Global.gameProxy.getMineGameData();if(o.colorIsLight(n.selectColor),o.visible)return void this.checkHuTips();if(o.visible=!0,e){var a=o.x,s=o.anchorOffsetY;o.x+=o.width,o.y-=o.height,o.rotation=75,egret.Tween.get(o).to({rotation:0,x:a,y:s},400,egret.Ease.circIn).call(function(){o.x=a,o.y=s,t.checkHuTips()},this)}},i.prototype.shoupaiDowns=function(){for(var e=0;e<this.shoupais.length;e++)this.shoupais[e].change2NoSelect()},i.prototype.removeShoupaiByValue=function(e,t){for(var i=0;t>i;i++){var o=this.findMajiangByValue(e);o&&(game.Utils.removeArrayItem(this.shoupais,o),game.UIUtils.removeSelf(o))}},i.prototype.removeShoupaiByPeng=function(e){this.removeShoupaiByValue(e,2),this.lastTouchPai=null,this.sortShoupais(),this.changeLast2Mopai()},i.prototype.removeShoupaiByGang=function(e){this.lastTouchPai=null,this.mopai.visible&&this.mopai.value!=e&&(this.lastTouchPai=this.findMajiangByValue(e),this.lastTouchPai.visible=!1),this.removeShoupaiByValue(e,4),this.lastTouchPai&&(this.mainGroup.addChild(this.lastTouchPai),this.shoupais.push(this.lastTouchPai)),this.sortShoupaisByChupai()},i.prototype.getMopaiPosition=function(){var e=this.mainGroup.numChildren+1;return this.recordsJson[e]},i.prototype.changeLast2Mopai=function(){if(this.isMopais(this.shoupais.length)){var e=this.getLastMajiang();this.mopai.resetValue(e.value),game.UIUtils.removeSelf(e),game.Utils.removeArrayItem(this.shoupais,e),this.showMopai(!1)}},i.prototype.lockHu=function(){for(var e=0;e<this.shoupais.length;e++)this.shoupais[e].huLight()},i.prototype.changePaiToVisible=function(e){for(var t=this.shoupais.concat([this.mopai]),i=0;i<t.length;i++){var o=t[i];o.huTip.visible=e}},i.prototype.changePaiToTip=function(e){for(var t=this.shoupais.concat([this.mopai]),i=0;i<t.length;i++){var o=t[i];o.huTip.visible||(o.huTip.visible=game.Utils.valueEqual(o.value,e))}},i.prototype.checkColors=function(){for(var e=Global.gameProxy.getMineGameData().selectColor,t=0;t<this.shoupais.length;t++){var i=this.shoupais[t];i&&i.colorIsLight(e)}},i.prototype.checkShoupaiError=function(){var e=[12,9,6,3];return e.indexOf(this.shoupais.length)>-1?!0:!1},i.prototype.checkHuTips=function(){try{this.changePaiToVisible(!1);var e=Global.gameProxy.getMineGameData(),t=Global.gameProxy.getMineShuopaiArr();if(e.huCards.length>0||!this.mopai.visible)return;for(var i={},o=0;o<t.length;o++){for(var r={},n=0;n<t.length;n++)if(o!=n){var a=t[n];r[a]?r[a]+=1:r[a]=1}var s=window.TingCardTip.getTings(r,e.selectColor,e.pengCards,e.gangCards);s.length>0&&(i[t[o]]=1)}for(var h=_.keys(i),o=0;o<h.length;o++){var a=h[o];this.changePaiToTip(a)}}catch(c){}},i.prototype.getShoupaiArr=function(){for(var e={},t=0;t<this.shoupais.length;t++){var i=this.shoupais[t];e[i.value]?e[i.value]++:e[i.value]=1}return e},i}(e.BaseShoupaiGroup);e.MineShoupaiGroup=t,__reflect(t.prototype,"majiang.MineShoupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.list=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.onAdded=function(){t.prototype.onAdded.call(this),EventManager.instance.addEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this),EventManager.instance.removeEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.findColor=function(e){for(var t=e.data,i=0;i<this.list.length;i++)this.list[i].color==t?this.list[i].showRect(t):this.list[i].showRect(0)},i.prototype.add=function(t,i,o){if(3==o)this.g2p(i);else{var r=new e.MjLeftPg(t,i,this.list.length+1,o);1==o?this.p2g(i):(this.addChild(r),this.list.push(r),this.resetZorder(),2==o?this.setSortOne():this.setSort(i))}},i.prototype.resetZorder=function(){for(var e=this.list.length-1;e>=0;e--)this.addChild(this.list[e])},i.prototype.g2p=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e){this.list[t].showColor(),this.list[t].dianpaoAni();break}},i.prototype.p2g=function(e){for(var t=0;t<this.list.length;t++)if(e==this.list[t].color){this.list[t].showColor_pbg();break}},i.prototype.setSortOne=function(){for(var e=[{x:0,y:307},{x:25,y:195},{x:48,y:94},{x:71,y:0}],t=0;t<this.list.length;t++)this.list[t].x=e[t].x,this.list[t].y=e[t].y},i.prototype.choseColorNumer=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e)return t},i.prototype.setSort=function(e){var t=[{x:0,y:257},{x:25,y:145},{x:48,y:44},{x:71,y:-50}];switch(this.choseColorNumer(e)){case 0:this.list[0].x=t[0].x,this.list[0].y=t[0].y,egret.Tween.get(this.list[0]).to({x:t[0].x,y:t[0].y+50},200,egret.Ease.circIn);break;case 1:this.list[1].x=t[1].x,this.list[1].y=t[1].y,egret.Tween.get(this.list[1]).to({x:t[1].x,y:t[1].y+50},200,egret.Ease.circIn);break;case 2:this.list[2].x=t[2].x,this.list[2].y=t[2].y,egret.Tween.get(this.list[2]).to({x:t[2].x,y:t[2].y+50},200,egret.Ease.circIn);break;case 3:this.list[3].x=t[3].x,this.list[3].y=t[3].y,egret.Tween.get(this.list[3]).to({x:t[3].x,y:t[3].y+50},200,egret.Ease.circIn)}},i}(game.BaseUI);e.MjLeftGroup=t,__reflect(t.prototype,"majiang.MjLeftGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.list=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.onAdded=function(){t.prototype.onAdded.call(this),EventManager.instance.addEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this),EventManager.instance.removeEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.findColor=function(e){for(var t=e.data,i=0;i<this.list.length;i++)this.list[i].color==t?this.list[i].showRect(t):this.list[i].showRect(0)},i.prototype.add=function(t,i,o){if(3==o)this.g2p(i);else{var r=new e.MjziPg(t,i,this.list.length+1,o);1==o?this.p2g(i):(this.addChild(r),this.list.push(r),2==o?this.setSortOne():this.setSort(i))}},i.prototype.g2p=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e){this.list[t].showColor(),this.list[t].dianpaoAni();break}},i.prototype.p2g=function(e){for(var t=0;t<this.list.length;t++)if(e==this.list[t].color){this.list[t].showColor_m();break}},i.prototype.setSortOne=function(){for(var e=[{x:436,y:0},{x:291,y:0},{x:145,y:0},{x:0,y:0}],t=0;t<this.list.length;t++)this.list[t].x=e[t].x,this.list[t].y=e[t].y},i.prototype.choseColorNumer=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e)return t},i.prototype.setSort=function(e){var t=[{x:336,y:0},{x:191,y:0},{x:45,y:0},{x:-100,y:0}];switch(this.choseColorNumer(e)){case 0:this.list[0].x=t[0].x,this.list[0].y=t[0].y,egret.Tween.get(this.list[0]).to({x:t[0].x+100},200,egret.Ease.circIn);break;case 1:this.list[1].x=t[1].x,this.list[1].y=t[1].y,egret.Tween.get(this.list[1]).to({x:t[1].x+100},200,egret.Ease.circIn);break;case 2:this.list[2].x=t[2].x,this.list[2].y=t[2].y,egret.Tween.get(this.list[2]).to({x:t[2].x+100},200,egret.Ease.circIn);break;case 3:this.list[3].x=t[3].x,this.list[3].y=t[3].y,egret.Tween.get(this.list[3]).to({x:t[3].x+100},200,egret.Ease.circIn)}},i}(game.BaseUI);e.MjMineGroup=t,__reflect(t.prototype,"majiang.MjMineGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.list=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.onAdded=function(){t.prototype.onAdded.call(this),EventManager.instance.addEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this),EventManager.instance.removeEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.findColor=function(e){for(var t=e.data,i=0;i<this.list.length;i++)this.list[i].color==t?this.list[i].showRect(t):this.list[i].showRect(0)},i.prototype.add=function(t,i,o){if(3==o)this.g2p(i);else{var r=new e.MjRightPg(t,i,this.list.length+1,o);1==o?this.p2g(i):(this.addChild(r),this.list.push(r),2==o?this.setSortOne():this.setSort(i))}},i.prototype.g2p=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e){this.list[t].showColor(),this.list[t].dianpaoAni();break}},i.prototype.p2g=function(e){for(var t=0;t<this.list.length;t++)if(e==this.list[t].color){this.list[t].showColor_pbg();break}},i.prototype.setSortOne=function(){for(var e=[{x:0,y:0},{x:20,y:83},{x:41,y:173},{x:63,y:268}],t=0;t<this.list.length;t++)this.list[t].x=e[t].x,this.list[t].y=e[t].y},i.prototype.choseColorNumer=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e)return t},i.prototype.setSort=function(e){var t=[{x:0,y:50},{x:20,y:133},{x:41,y:223},{x:63,y:318}];switch(this.choseColorNumer(e)){case 0:this.list[0].x=t[0].x,this.list[0].y=t[0].y,egret.Tween.get(this.list[0]).to({x:t[0].x,y:t[0].y-50},200,egret.Ease.circIn);break;case 1:this.list[1].x=t[1].x,this.list[1].y=t[1].y,egret.Tween.get(this.list[1]).to({x:t[1].x,y:t[1].y-50},200,egret.Ease.circIn);break;case 2:this.list[2].x=t[2].x,this.list[2].y=t[2].y,egret.Tween.get(this.list[2]).to({x:t[2].x,y:t[2].y-50},200,egret.Ease.circIn);break;case 3:this.list[3].x=t[3].x,this.list[3].y=t[3].y,egret.Tween.get(this.list[3]).to({x:t[3].x,y:t[3].y-50},200,egret.Ease.circIn)}},i}(game.BaseUI);e.MjRightGroup=t,__reflect(t.prototype,"majiang.MjRightGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.list=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.onAdded=function(){t.prototype.onAdded.call(this),EventManager.instance.addEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this),EventManager.instance.removeEvent(EventNotify.FIND_COLOR,this.findColor,this)},i.prototype.findColor=function(e){for(var t=e.data,i=0;i<this.list.length;i++)this.list[i].color==t?this.list[i].showRect(t):this.list[i].showRect(0)},i.prototype.add=function(t,i,o){if(3==o)this.g2p(i);else{var r=new e.MjShangPg(t,i,this.list.length+1,o);1==o?this.p2g(i):(this.addChild(r),this.list.push(r),2==o?this.setSortOne():this.setSort(i))}},i.prototype.g2p=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e){this.list[t].showColor(),this.list[t].dianpaoAni();break}},i.prototype.p2g=function(e){for(var t=0;t<this.list.length;t++)if(e==this.list[t].color){this.list[t].showColor_pbg();break}},i.prototype.setSortOne=function(){for(var e=[{x:0,y:0},{x:113,y:0},{x:224,y:0},{x:336,y:0}],t=0;t<this.list.length;t++)this.list[t].x=e[t].x,this.list[t].y=e[t].y},i.prototype.choseColorNumer=function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].color==e)return t},i.prototype.setSort=function(e){var t=[{x:100,y:0},{x:213,y:0},{x:324,y:0},{x:436,y:0}];switch(this.choseColorNumer(e)){case 0:this.list[0].x=t[0].x,this.list[0].y=t[0].y,egret.Tween.get(this.list[0]).to({x:t[0].x-100},200,egret.Ease.circIn);break;case 1:this.list[1].x=t[1].x,this.list[1].y=t[1].y,egret.Tween.get(this.list[1]).to({x:t[1].x-100},200,egret.Ease.circIn);break;case 2:this.list[2].x=t[2].x,this.list[2].y=t[2].y,egret.Tween.get(this.list[2]).to({x:t[2].x-100},200,egret.Ease.circIn);break;case 3:this.list[3].x=t[3].x,this.list[3].y=t[3].y,egret.Tween.get(this.list[3]).to({x:t[3].x-100},200,egret.Ease.circIn)}},i}(game.BaseUI);e.MjTopGroup=t,__reflect(t.prototype,"majiang.MjTopGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.shoupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.initWithArr=function(i,o){void 0===o&&(o=!0),t.prototype.clearGroup.call(this),this.mopai=new e.RightShoupai,this.mainGroup.addChild(this.mopai),game.UIUtils.setAnchorPot(this.mopai),this.mopai.name="mopai",this.mopai.visible=!1;for(var r=i;r>0;r--){var n=this.createShoupai(r);n.visible=o}},i.prototype.createShoupai=function(t){var i=new e.RightShoupai;this.mainGroup.addChild(i),game.UIUtils.setAnchorPot(i);var o=this.recordsJson[t];return i.changeBgResource(o.source),this.shoupais.push(i),i.x=o.x,i.y=o.y,i.name=o.name,i},i.prototype.removeShoupaiByPeng=function(){this.removeLastPai(),this.removeLastPai()},i.prototype.changeColorWithArr=function(e){for(var t=(Global.gameProxy.getPlayerByIndex(this.index).selectColor,Global.gameProxy.getPlayerByIndex(this.index).huCards.length>0,0);t<e.length;t++){var i=e[t],o=this.mainGroup.getChildByName("mj"+(t+1)),r=this.recordsJson[t+1];o&&(o.x=r.x-2,o.visible=!0,o.showColor(i))}},i.prototype.setPointByIndex=function(e){var t=this.recordsJson[e];this.mopai.x=t.x-2,this.mopai.y=t.y-30,this.mopai.changeBgResource(t.source)
},i.prototype.resetZorder=function(){for(var e=14;e>0;e--){var t=this.mainGroup.getChildByName("mj"+e);t&&this.mainGroup.addChild(t)}},i}(e.BaseShoupaiGroup);e.RightShoupaiGroup=t,__reflect(t.prototype,"majiang.RightShoupaiGroup")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.shoupais=[],e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.initWithArr=function(i,o){void 0===o&&(o=!0),t.prototype.clearGroup.call(this);for(var r=1;i>=r;r++){var n=new e.TopShoupai;n.changeBgResource(r),this.mainGroup.addChild(n),game.UIUtils.setAnchorPot(n),n.visible=o,this.shoupais.push(n);var a=this.recordsJson[r];n.x=a.x,n.y=a.y,n.name=a.name}this.mopai=new e.TopShoupai,this.mainGroup.addChild(this.mopai),this.mopai.name="mopai",game.UIUtils.setAnchorPot(this.mopai),this.mopai.visible=!1,this.resetZorder()},i.prototype.showMopaiAni=function(){var e=this.mainGroup.numChildren,t=this.mainGroup.getChildByName("mj"+e),i=this.recordsJson[e];t.visible=!0,t.x=i.x-30,t.y=i.y},i.prototype.showChupaiAni=function(){var e=this.mainGroup.numChildren,t=this.mainGroup.getChildByName("mj"+e);t.visible=!1},i.prototype.setPointByIndex=function(e){var t=this.recordsJson[e];this.mopai.x=t.x-20,this.mopai.y=t.y,this.mopai.changeBgResource(e)},i.prototype.resetZorder=function(){this.mopai&&this.mainGroup.addChild(this.mopai);for(var e=[14,13,12,11,10,9,8,7,6,1,2,3,4,5],t=0;t<=e.length-1;t++)this.mainGroup.getChildByName("mj"+e[t])&&this.mainGroup.addChild(this.mainGroup.getChildByName("mj"+e[t]))},i}(e.BaseShoupaiGroup);e.TopShoupaiGroup=t,__reflect(t.prototype,"majiang.TopShoupaiGroup")}(majiang||(majiang={}));var MajiangConfig=function(){function e(){}return e.getSoundConfig=function(){return e.MJ_SOUND_CONFIG?e.MJ_SOUND_CONFIG:(e.MJ_SOUND_CONFIG=RES.getRes("mj_sound_json"),e.MJ_SOUND_CONFIG)},e.Task={HU:1,GANG:2,PENG:3,CHI:4,TING:5,CUSTOM:8,PASS:11,PLAY:12},e.MJXLCH="mjxlch",e.MJXZDD="mjxzdd",e.commonMessage=[{message:"你太牛了",id:1},{message:"哈哈！手气真好",id:2},{message:"快点出牌噢~",id:3},{message:"今天真高兴",id:4},{message:"你放炮，我不胡",id:5},{message:"你家里是开银行的吧",id:6},{message:"你的牌打得太好啦",id:7},{message:"大家好，很高兴见到各位",id:8},{message:"怎么又断线啦！",id:9}],e.msgType={Word:1,Expression:2},e}();__reflect(MajiangConfig.prototype,"MajiangConfig");var game;!function(e){var t=function(t){function i(){var e=t.call(this,i.NAME)||this;return e.type="scene",e}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[SceneNotify.OPEN_LOADING,SceneNotify.CLOSE_LOADING]},i.prototype.onRegister=function(){t.prototype.onRegister.call(this),this.facade.registerMediator(new majiang.MajiangMediator)},i.prototype.showViewComponent=function(){this.viewComponent=new e.LogoScene;var t=GameLayerManager.gameLayer().sceneLayer;t.addChild(this.viewComponent)},i.prototype.handleNotification=function(e){switch(e.getName()){case SceneNotify.OPEN_LOADING:this.showViewComponent();break;case SceneNotify.CLOSE_LOADING:this.closeViewComponent(1)}},i.NAME="LogoMediator",i}(BaseMediator);e.LogoMediator=t,__reflect(t.prototype,"game.LogoMediator")}(game||(game={}));var game;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.maxX=668,e.skinName="LogoSceneSkin",e}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.resGroup="main";var e=document.getElementById("loadingDiv");e.parentNode.removeChild(e),document.body.style.background="#000000",egret.Tween.get(this.rotationImage,{loop:!0}).to({rotation:360},3e3),this.beganLoadResGroup()},i.prototype.beganLoadResGroup=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.loadGroup(this.resGroup)},i.prototype.onResourceLoadComplete=function(e){e.groupName==this.resGroup&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),this.onResourceLoadOver())},i.prototype.onResourceProgress=function(e){e.groupName==this.resGroup},i.prototype.onAdded=function(){t.prototype.onAdded.call(this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this)},i.prototype.onResourceLoadOver=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.getRoomInfo(),[2]})})},i.prototype.getRoomInfo=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){return t=ServerConfig.PATH_CONFIG.http_header+ServerConfig.PATH_CONFIG.http_server+":"+ServerConfig.PATH_CONFIG.http_port,e.AppFacade.getInstance().sendNotification(SceneNotify.CLOSE_LOADING),e.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_MAJIANG),[2]})})},i}(e.BaseScene);e.LogoScene=t,__reflect(t.prototype,"game.LogoScene")}(game||(game={}));var majiang;!function(e){var t=function(t){function i(){var e=t.call(this,i.NAME)||this;return e.type="scene",e}return __extends(i,t),i.prototype.listNotificationInterests=function(){return[SceneNotify.OPEN_MAJIANG,SceneNotify.CLOSE_MAJIANG,SceneNotify.FLUSH_MAJIANG]},i.prototype.onRegister=function(){t.prototype.onRegister.call(this)},i.prototype.showViewComponent=function(){if(!this.viewComponent){game.UIUtils.changeResize(1),this.viewComponent=new e.MajiangScene;var t=GameLayerManager.gameLayer().sceneLayer;t.addChild(this.viewComponent)}},i.prototype.handleNotification=function(e){switch(e.getName()){case SceneNotify.OPEN_MAJIANG:this.showViewComponent();break;case SceneNotify.CLOSE_MAJIANG:this.closeViewComponent(1);break;case SceneNotify.FLUSH_MAJIANG:this.viewComponent&&(this.closeViewComponent(1),Global.gameProxy.clearRoomInfo(),this.showViewComponent())}},i.NAME="MajiangMediator",i}(BaseMediator);e.MajiangMediator=t,__reflect(t.prototype,"majiang.MajiangMediator")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.pmdKey="mjxlch",i.hszShoupaiArr=[],i.maxTouchShoupai=0,i.showQingqueTipState=!1,i.skinName=new e.MajiangSceneSkin,i.leftHuShowGroup.removeChildren(),i.rightHuShowGroup.removeChildren(),i.topHuShowGroup.removeChildren(),i.mineHuShowGroup.removeChildren(),i}return __extends(i,t),i.prototype.removePaiQiang=function(e){for(var t=0;e>t;t++)this.paiQiang.removeNumByIndex()},i.prototype.createChildren=function(){return __awaiter(this,void 0,void 0,function(){var i,o,r;return __generator(this,function(n){return t.prototype.createChildren.call(this),i=decodeURIComponent(game.Utils.getURLQueryString("base64String")),o=egret.Base64Util.decode(i),r=JSON.parse(new egret.ByteArray(o).readUTFBytes(o.byteLength)),this.betbase=r.bet_base,this.playerInfo=r.playerInfo,this.dealerIndex=r.dealerIndex,this.gameInfo=r.gameInfo,this.playerIndex=r.playerIndex,this.remainNum=r.remainNum,this.diceNumber=r.diceNumber,this.dizhu.text="底注:"+this.betbase,this.directions=e.MajiangUtils.getDirectionByMine(this.playerIndex),this.showHeaders(this.playerInfo),this.gameOverShow(this.gameInfo),this.renderChupaiGroups(this.gameInfo),this.playerPengCardPush(this.gameInfo),this.playerGangCard(this.gameInfo),this.renderHupaiGroup(this.gameInfo),this.paiQiang.showPaiQiang(this.directions,this.dealerIndex,this.diceNumber),this.paiQiang.reloadPaiQiang(this.remainNum),this.updateSypai(this.remainNum),[2]})})},i.prototype.showHeaders=function(e){for(var t in e){var i=this.directions[t],o=this[i+"Header"];o.initWithData(e[t],i),o.showIsZhuang(game.Utils.valueEqual(this.dealerIndex,t)),o.visible=!0}for(var t in this.gameInfo){var i=this.directions[t],o=this[i+"Header"];o.showColor(this.gameInfo[t].selectColor)}},i.prototype.gameOverShow=function(t){for(var i in t){var o=t[i];if(this.playerIndex==i){var r=new e.MineShowPai(o.handCards,2);this.mineHuShowGroup.addChild(r),this.mineHuShowGroup.visible=!0,this.mineGroup.removeChildren()}else this.showOthers(o,i)}},i.prototype.showOthers=function(t,i){switch(this.directions[i]){case"left":this.leftHuShowGroup.removeChildren();var o=new e.LeftShowPai(t.handCards,2);this.leftHuShowGroup.addChild(o),this.leftHuShowGroup.visible=!0,this.leftGroup.removeChildren();break;case"top":this.topHuShowGroup.removeChildren();var r=new e.TopShowPai(t.handCards,2);this.topHuShowGroup.addChild(r),this.topHuShowGroup.visible=!0,this.topGroup.removeChildren();break;case"right":this.rightHuShowGroup.removeChildren();var n=new e.RightShowPai(t.handCards,2);this.rightHuShowGroup.addChild(n),this.rightHuShowGroup.visible=!0,this.rightGroup.removeChildren()}},i.prototype.renderChupaiGroups=function(e){for(var t in e){var i=this.directions[t];this[i+"ChupaiGroup"].visible=!0,this[i+"ChupaiGroup"].clearDatas(),this[i+"ChupaiGroup"].createByArr1(e[t].playCards)}},i.prototype.playerPengCardPush=function(e){for(var t in e)for(var i=this.directions[t],o=e[t].pengCards,r=0;r<o.length;r++)this[i+"PgGroup"].add(5,o[r])},i.prototype.playerGangCard=function(e){for(var t in e){var i=this.directions[t],o=e[t].gangCards;for(var r in o)switch(o[r].gang){case 1:this[i+"PgGroup"].add(1,o[r].card);break;case 4:this[i+"PgGroup"].add(4,o[r].card);break;case 2:this[i+"PgGroup"].add(2,o[r].card);break;case 3:this[i+"PgGroup"].add(3,o[r].card)}}},i.prototype.renderHupaiGroup=function(e){for(var t in e){var i=(e[t],this.directions[t]),o=this[i+"HupaiGroup"];o.removeChildren(),o.initWithDirection(i),o.visible=!0;var r=e[t].huCards;o.initWithArr(r)}},i.prototype.onTouchTap=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return e.stopPropagation(),[2]})})},i.prototype.changGnBtnStat=function(e){this.gnBtn.visible=!0,this.gnGroup.x=2560},i.prototype.onAdded=function(){t.prototype.onAdded.call(this)},i.prototype.onRemoved=function(){t.prototype.onRemoved.call(this)},i.prototype.updateSypai=function(e){this.syLabel.text=e+""},i.prototype.addEffectAni=function(e,t){var i=this;GameCacheManager.instance.getMcCache(t,e+"_"+t,function(t){if(t){switch(t.scaleX=t.scaleY=1.2,t.addEventListener(egret.MovieClipEvent.COMPLETE,function(){game.UIUtils.removeSelf(t)},i),i.effectGroup.addChild(t),e){case"mine":t.x=.5*GameConfig.curWidth(),t.y=.75*GameConfig.curHeight();break;case"left":t.x=.22*GameConfig.curWidth(),t.y=.4*GameConfig.curHeight();break;case"right":t.x=.77*GameConfig.curWidth(),t.y=.4*GameConfig.curHeight();break;case"top":t.x=.5*GameConfig.curWidth(),t.y=.2*GameConfig.curHeight()}t.gotoAndPlay(1,1)}})},i.prototype.getOfferSetPos=function(e,t){var i={mine:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},top:{x:0,y:0}};switch(t){case"hu":i.mine.x=-50,i.top.x=-50;break;case"gsh":}return i[e]},i}(game.BaseScene);e.MajiangScene=t,__reflect(t.prototype,"majiang.MajiangScene")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i){var o=t.call(this)||this;return o.value=i,o.skinName=new e.SelectGangItemSkin,o}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.initWithValue()},i.prototype.initWithValue=function(){for(var e=1;4>=e;e++)this["pai"+e].changeColor(this.value)},i.prototype.onTouchTap=function(e){e.stopPropagation(),EventManager.instance.dispatch(EventNotify.GANG_SELECT,this.value)},i}(game.BaseUI);e.SelectGangItem=t,__reflect(t.prototype,"majiang.SelectGangItem")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.createAnimation=function(e){var t=this;GameCacheManager.instance.getMcCache("header",e+"_header",function(e){e&&(t.headerAni=e,t.addChild(t.headerAni),t.headerAni.x=11,t.headerAni.y=-10,t.headerAni.scaleX=1.5,t.headerAni.scaleY=1.7,t.addChild(t.zhuangImage),t.addChild(t.colorImage),e.visible=!1)})},t.prototype.onRemoved=function(){e.prototype.onRemoved.call(this)},t.prototype.showTip=function(e){this.headerAni.visible=e,e?this.headerAni.play(-1):this.headerAni.stop()},t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.initWithData=function(e,t){if(e){this.playerInfo=e,this.goldLabel.text=NumberFormat.formatGold_scence(e.gold),this.nameLabel.text=e.nickname;var i=e.figureUrl||e.figure_url,o=e.sex||e.sex;this.headerImage.source="hall_header_"+o+"_"+i+"_png",e&&e.selectColor>0&&1==Global.gameProxy.roomInfo.selectColorStatus&&this.showColor(e.selectColor)}else this.nameLabel.text=e.nickname,this.headerImage.source="hall_header_"+e.sex+"_"+e.figure_url+"_png",this.goldLabel.text=NumberFormat.formatGold_scence(e.gold)},t.prototype.showColor=function(e){this.colorImage.visible=!0,this.colorImage.source=RES.getRes("q_type_"+e+"_png")},t.prototype.showIsZhuang=function(e){this.zhuangImage.visible=e},t.prototype.updateGold=function(e){this.playerInfo.gold=e,this.goldLabel.text=NumberFormat.formatGold_scence(e)},t.prototype.playSound=function(e){1==this.playerInfo.sex},t.prototype.showMsgAndImg=function(e,t,i,o,r){var n=this;switch(egret.Tween.removeTweens(this.messageGroup),0!=t&&(this.showVisible(1),this.msgLable.text=t),0!=r&&(this.showVisible(2),this.msgPng.source=RES.getRes(r)),this.msgBg.width=this.msgLable.width+30,e){case"right":this.messageGroup.scaleX=-1,this.messageGroup.x=75,this.messageGroup.y=-66,this.msgLable.scaleX=-1,this.msgLable.x=187,this.msgLable.y=14,this.msgPng.scaleX=-1,this.msgPng.x=68,this.msgPng.y=-10,this.msgLable.x=this.msgBg.x,this.msgLable.x=this.msgBg.x+this.msgLable.width+15,this.msgLable.y=this.msgLable.y+3;break;case"left":case"mine":this.messageGroup.x=22,this.messageGroup.y=-66;break;case"top":this.messageGroup.scaleX=-1,this.messageGroup.scaleY=-1,this.messageGroup.x=75,this.messageGroup.y=127,this.msgLable.scaleX=-1,this.msgLable.scaleY=-1,this.msgLable.y=48,this.msgLable.x=180,this.msgPng.scaleX=-1,this.msgPng.scaleY=-1,this.msgPng.y=50,this.msgPng.x=67,this.msgLable.x=this.msgBg.x+this.msgLable.width+15,this.msgLable.y=this.msgLable.y-3}this.addChild(this.messageGroup),this.messageGroup.visible=!0,this.messageGroup.alpha=0,egret.Tween.get(this.messageGroup).to({alpha:0}).to({alpha:1},300).wait(2e3).to({alpha:0},300).wait(10).call(function(){n.messageGroup.visible=!1})},t.prototype.showVisible=function(e){1==e?(this.msgPngBg.visible=!1,this.msgPng.visible=!1,this.msgBg.visible=!0,this.msgLable.visible=!0):(this.msgPngBg.visible=!0,this.msgPng.visible=!0,this.msgBg.visible=!1,this.msgLable.visible=!1)},t}(game.BaseUI);e.WidgetHeader=t,__reflect(t.prototype,"majiang.WidgetHeader")}(majiang||(majiang={}));var game;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.getInstance=function(){return null==this.instance&&(this.instance=new i),this.instance},i.prototype.initializeController=function(){t.prototype.initializeController.call(this),this.registerCommand(i.STARTUP,e.StartupCommand)},i.prototype.startUp=function(e){i.getInstance().sendNotification(i.STARTUP,e),this.removeCommand(i.STARTUP)},i.STARTUP="startup",i}(puremvc.Facade);e.AppFacade=t,__reflect(t.prototype,"game.AppFacade",["puremvc.IFacade","puremvc.INotifier"])}(game||(game={}));var majiang;!function(e){var t=function(t){function i(i,o,r){var n=t.call(this)||this;return n.direction="left",n.row=o,n.col=r,n.value=i,n.skinName=new e.LeftChupaiSkin,n}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.colorImage.source=RES.getRes("color_value_"+this.value+"_png")},i.prototype.setByRecord=function(e){this.record=e,this.x=e.x,this.y=e.y,this.record.source&&(this.bgImage1.source=this.bgImage.source=RES.getRes(this.record.source))},i.prototype.useBgSouce=function(){this.bgImage1.source=this.bgImage.source=RES.getRes("left_chupai_21_png")},i.prototype.settingColors=function(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:this.colorImage.skewX=90,this.colorImage.skewY=-264,this.colorImage.x=this.colorImage.x+2;break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:this.colorImage.skewX=90,this.colorImage.skewY=-262,this.colorImage.x=this.colorImage.x+1;break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:this.colorImage.skewX=90,this.colorImage.skewY=-261,this.colorImage.x=this.colorImage.x+2}},i}(e.BaseChupai);e.LeftChupai=t,__reflect(t.prototype,"majiang.LeftChupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i){var o=t.call(this)||this;return o.defaultSrouce="7",o.direction="mine",o.value=i,o.skinName=new e.MineChupaiSkin,o}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.colorImage.source=RES.getRes("color_value_"+this.value+"_png")},i.prototype.setByRecord=function(e){this.record=e,this.x=e.x,this.y=e.y,this.record.source&&(this.bgImage.source=RES.getRes(this.record.source))},i.prototype.initWithIndex=function(e){switch(e%7){case 0:this.colorImage.skewX=-2;break;case 1:case 2:case 3:case 4:this.colorImage.skewX=2;break;case 5:this.colorImage.skewX=-1;break;case 6:this.colorImage.skewX=-1}this.bgImage1.source=this.bgImage.source=RES.getRes("mine_chupai_"+e+"_png")},i.prototype.settingColors=function(e){switch(e%7){case 1:this.colorImage.skewX=4;break;case 2:this.colorImage.skewX=3;break;case 3:this.colorImage.skewX=2;break;case 4:this.colorImage.skewX=1;break;case 5:this.colorImage.skewX=0;break;case 6:this.colorImage.skewX=-1;break;case 0:this.colorImage.skewX=-2}},i}(e.BaseChupai);e.MineChupai=t,__reflect(t.prototype,"majiang.MineChupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i,o,r){var n=t.call(this)||this;return n.direction="right",n.row=o,n.col=r,n.value=i,n.skinName=new e.RightChupaiSkin,n}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.colorImage.source=RES.getRes("color_value_"+this.value+"_png")},i.prototype.setByRecord=function(e){this.record=e,this.x=e.x,this.y=e.y,this.record.source&&(this.bgImage1.source=this.bgImage.source=RES.getRes(this.record.source))},i.prototype.useBgSouce=function(){this.bgImage1.source=this.bgImage.source=RES.getRes("right_chupai_21_png")},i.prototype.settingColors=function(e){switch(this.colorImage.width=this.colorImage.width-2,this.colorImage.height=this.colorImage.height-2,this.colorImage.x=this.colorImage.x+2,this.colorImage.y=this.colorImage.y-2,e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:this.colorImage.skewX=-90,this.colorImage.skewY=265;break;case 8:case 9:case 10:case 11:case 12:case 13:case 14:this.colorImage.skewX=-90,this.colorImage.skewY=265;break;case 15:case 16:case 17:case 18:case 19:case 20:case 21:this.colorImage.skewX=-90,this.colorImage.skewY=264}},i}(e.BaseChupai);e.RightChupai=t,__reflect(t.prototype,"majiang.RightChupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i){var o=t.call(this)||this;return o.direction="top",o.defaultSrouce=7,o.value=i,o.skinName=new e.TopChupaiSkin,o}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.colorImage.source=RES.getRes("color_value_"+this.value+"_png")},i.prototype.setByRecord=function(e){this.record=e,this.x=e.x,this.y=e.y,this.record.source&&(this.bgImage.source=RES.getRes(this.record.source))},i.prototype.initWithIndex=function(e){this.bgImage.source=RES.getRes("top_chupai_"+e+"_png")},i.prototype.settingColors=function(e){switch(this.colorImage.y=this.colorImage.y+.5,e%7){case 1:this.colorImage.skewX=177,this.colorImage.x=this.colorImage.x+.5;break;case 2:this.colorImage.skewX=178;break;case 3:this.colorImage.skewX=179;break;case 4:this.colorImage.skewX=180,this.colorImage.x=this.colorImage.x-.5;break;case 5:this.colorImage.skewX=181,this.colorImage.x=this.colorImage.x-1;break;case 6:this.colorImage.skewX=182,this.colorImage.x=this.colorImage.x-1;break;case 0:this.colorImage.skewX=183,this.colorImage.x=this.colorImage.x-2}},i}(e.BaseChupai);e.TopChupai=t,__reflect(t.prototype,"majiang.TopChupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.value=0,t.skinName=new LeftShoupaiSkin,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.changeBgResource=function(e){this.bgImage.source=RES.getRes(e)},t.prototype.showColor=function(e){this.value=e,this.bgImage.visible=!1},t}(eui.Component);e.LeftShoupai=t,__reflect(t.prototype,"majiang.LeftShoupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i,o){var r=t.call(this)||this;return r.colorArr1=[],r.arrysValues=[],r.colorArr=i,r.value=o,r.skinName=new e.LeftHuShowSkin,r}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),1==this.value?this.show():2==this.value&&this.showColors()},i.prototype.showColors=function(){for(var e in this.colorArr)for(var t=this.colorArr[e],i=0;t>i;i++)this.colorArr1.push(e);this.show()},i.prototype.show=function(){if(1==this.value){this.leftHuShow_bei.visible=!0;for(var e=0;e<this.colorArr.length;e++)this.leftHuShow_bei.getChildAt(e).visible=!0}else if(2==this.value){var t=void 0;this.leftHuShow.visible=!0;for(var e=0;e<this.colorArr1.length;e++)this.leftHuShow.getChildAt(e).visible=!0,t=this.leftHuShow_color.getChildAt(e),t.source=RES.getRes("color_value_"+this.colorArr1[e]+"_png")}},i.prototype.chuPais=function(e){this.chushihuashuju(),this.shoupaifz(e)},i.prototype.pengPai=function(e){this.chushihuashuju(),this.shoupaifz(e)},i.prototype.moPais=function(e){this.chushihuashuju(),this.shoupaifz(e,1)},i.prototype.zhimo=function(e){this.chushihuashuju();var t=_.initial(e);this.shoupaifz(t)},i.prototype.shoupaifz=function(e,t){try{var i=void 0;this.leftHuShow.visible=!0;for(var o=0;o<e.length;o++)this.leftHuShow.getChildAt(o).visible=!0,this.leftHuShow_color.getChildAt(o).visible=!0,i=this.leftHuShow_color.getChildAt(o),i.source=RES.getRes("color_value_"+e[o]+"_png")}catch(r){LogUtils.logI("cuol")}},i.prototype.huansanzhang=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<this.arrysValues.length;i++)e[t]==this.arrysValues[i]&&this.arrysValues.splice(i,1);this.chushihuashuju(),this.shoupaifz(this.arrysValues)},i.prototype.initArr=function(e){this.arrysValues=[],this.chushihuashuju();var t;for(var i in e)for(var o=e[i],r=0;o>r;r++)this.arrysValues.push(i);this.leftHuShow.visible=!0;for(var r=0;r<this.arrysValues.length;r++)this.leftHuShow.getChildAt(r).visible=!0,this.leftHuShow_color.getChildAt(r).visible=!0,t=this.leftHuShow_color.getChildAt(r),t.source=RES.getRes("color_value_"+this.arrysValues[r]+"_png")},i.prototype.chushihuashuju=function(){this.leftHuShow.visible=!1;for(var e=0;14>e;e++)this.leftHuShow.getChildAt(e).visible=!1,this.leftHuShow_color.getChildAt(e).visible=!1},i}(eui.Component);e.LeftShowPai=t,__reflect(t.prototype,"majiang.LeftShowPai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i){var o=t.call(this)||this;return o.value=0,o.selected=!1,o.lock=!1,o.touchHeight=30,o.value=i,o.skinName=new e.MineShoupaiSkin,o}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.touchEnabled=!0,this.touchHeight=30,this.initWithData(this.value),this.maskRect.mask=this.bgImage,this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchTap,this)},i.prototype.setPosition=function(e){this.index=e},i.prototype.initWithData=function(e){0==e&&(this.visible=!1),this.colorImage.source=RES.getRes("color_value_"+this.value+"_png")},i.prototype.resetValue=function(e){this.value=e,0==this.value?this.colorImage.source="":this.colorImage.source=RES.getRes("color_value_"+this.value+"_png")},i.prototype.onTouchTap=function(t){e.MajiangUtils.playClick(),this.lock||this.touchOn()},i.prototype.touchOn=function(){EventManager.instance.dispatch(EventNotify.SHOUPAI_TOUCH,this)},i.prototype.selectUp=function(){this.y=this.touchHeight,this.selected=!0},i.prototype.selectDown=function(){this.y=this.anchorOffsetY,this.selected=!1},i.prototype.selectTouch=function(){return this.y==this.anchorOffsetY?(this.y=this.touchHeight,this.selected=!0):(this.y=this.anchorOffsetY,this.selected=!1),this.selected},i.prototype.change2NoSelect=function(){this.y=this.anchorOffsetY,this.selected=!1},i.prototype.showDownAni=function(){var e=this;this.lock=!0,this.y=0,egret.Tween.get(this).to({y:this.anchorOffsetY},300).call(function(){e.lock=!1})},i.prototype.setLihight=function(e){this.maskRect.visible=e},i.prototype.colorIsLight=function(e){if(!this.lock){var t=Math.floor(this.value/10);this.setLihight(game.Utils.valueEqual(e,t))}},i.prototype.huLight=function(){this.maskRect.visible=!0,this.lock=!0,this.touchEnabled=!1},i}(eui.Component);e.MineShoupai=t,__reflect(t.prototype,"majiang.MineShoupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(i){var o=t.call(this)||this;return o.value=i,o.skinName=new e.MineShoupaiSkin,o}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.touchEnabled=!0,this.colorImage.source=RES.getRes("color_value_"+this.value+"_png")},i}(eui.Component);e.MineShoupaiCopy=t,__reflect(t.prototype,"majiang.MineShoupaiCopy")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(t,i){var o=e.call(this)||this;return o.colorArr1=[],o.colorArr=t,o.value=i,o.skinName=new MineHuShowSkin,o}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.showColors()},t.prototype.showColors=function(){for(var e in this.colorArr)for(var t=this.colorArr[e],i=0;t>i;i++)this.colorArr1.push(e);this.show()},t.prototype.show=function(){if(2==this.value){var e=void 0;this.mineHuShow.visible=!0;for(var t=0;t<this.colorArr1.length;t++)this.mineHuShow.getChildAt(t).visible=!0,e=this.mineHuShow_color.getChildAt(t),e.source=RES.getRes("color_value_"+this.colorArr1[t]+"_png")}},t}(eui.Component);e.MineShowPai=t,__reflect(t.prototype,"majiang.MineShowPai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.changeColor=function(e){this.colorImage.source=RES.getRes("color_value_"+e+"_png")},t}(eui.Component);e.MineZhengpai=t,__reflect(t.prototype,"majiang.MineZhengpai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.value=0,t.skinName=new RightShoupaiSkin,t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this)},t.prototype.changeBgResource=function(e){this.bgImage.source=RES.getRes(e)},t.prototype.showColor=function(e){this.value=e,this.bgImage.visible=!1},t}(eui.Component);e.RightShoupai=t,__reflect(t.prototype,"majiang.RightShoupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(t,i){var o=e.call(this)||this;return o.colorArr1=[],o.colorArr2=[],o.arrysValues=[],o.colorArr=t,o.value=i,o.skinName=new RightHuShowSkin,o}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),1==this.value?this.show():2==this.value&&this.showColors()},t.prototype.showColors=function(){for(var e in this.colorArr)for(var t=this.colorArr[e],i=0;t>i;i++)this.colorArr1.push(e);this.show()},t.prototype.show=function(){if(1==this.value){this.rightHuShow_bei.visible=!0;for(var e=0;e<this.colorArr.length;e++)this.rightHuShow_bei.getChildAt(12-e).visible=!0}else if(2==this.value){var t=void 0;this.rightHuShow.visible=!0;for(var e=0;e<this.colorArr1.length;e++)this.rightHuShow.getChildAt(13-e).visible=!0,t=this.rightHuShow_color.getChildAt(13-e),t.source=RES.getRes("color_value_"+this.colorArr1[e]+"_png")}},t.prototype.chuPais=function(e){this.chushihuashuju(),this.shoupaifz(e)},t.prototype.pengPai=function(e){this.chushihuashuju(),this.shoupaifz(e)},t.prototype.moPais=function(e){this.chushihuashuju(),this.shoupaifz(e,1)},t.prototype.zhimo=function(e){this.chushihuashuju();var t=_.initial(e);this.shoupaifz(t)},t.prototype.shoupaifz=function(e,t){try{var i=void 0;this.rightHuShow.visible=!0;for(var o=0;o<e.length;o++)this.rightHuShow.getChildAt(13-o).visible=!0,this.rightHuShow_color.getChildAt(13-o).visible=!0,i=this.rightHuShow_color.getChildAt(13-o),i.source=RES.getRes("color_value_"+e[o]+"_png")}catch(r){LogUtils.logI("cuol")}},t.prototype.huansanzhang=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<this.arrysValues.length;i++)e[t]==this.arrysValues[i]&&this.arrysValues.splice(i,1);this.chushihuashuju(),this.shoupaifz(this.arrysValues)},t.prototype.initArr=function(e){this.arrysValues=[],this.chushihuashuju();var t;for(var i in e)for(var o=e[i],r=0;o>r;r++)this.arrysValues.push(i);this.rightHuShow.visible=!0;for(var r=0;r<this.arrysValues.length;r++)this.rightHuShow.getChildAt(r).visible=!0,this.rightHuShow_color.getChildAt(r).visible=!0,t=this.rightHuShow_color.getChildAt(r),t.source=RES.getRes("color_value_"+this.arrysValues[r]+"_png")},t.prototype.chushihuashuju=function(){this.rightHuShow.visible=!1;for(var e=0;14>e;e++)this.rightHuShow.getChildAt(e).visible=!1,this.rightHuShow_color.getChildAt(e).visible=!1},t}(eui.Component);e.RightShowPai=t,__reflect(t.prototype,"majiang.RightShowPai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.skinName=new e.TopShoupaiSkin,i}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this)},i.prototype.changeBgResource=function(e){(1>e||e>13||!e)&&(e=13),this.index=e,this.bgImage.source=RES.getRes("top_shoupai_"+this.index+"_png")},i}(eui.Component);e.TopShoupai=t,__reflect(t.prototype,"majiang.TopShoupai")}(majiang||(majiang={}));var majiang;!function(e){var t=function(e){function t(t,i){var o=e.call(this)||this;return o.colorArr1=[],o.arrysValues=[],o.colorArr=t,o.value=i,o.skinName=new TopHuShowSkin,o}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),1==this.value?this.show():2==this.value&&this.showColors()},t.prototype.showColors=function(){for(var e in this.colorArr)for(var t=this.colorArr[e],i=0;t>i;i++)this.colorArr1.push(e);this.show()},t.prototype.show=function(){if(1==this.value){this.topHuShow_bei.visible=!0;for(var e=0;e<this.colorArr.length;e++)this.topHuShow_bei.getChildAt(e).visible=!0}else if(2==this.value){var t=void 0;this.topHuShow.visible=!0;for(var e=0;e<this.colorArr1.length;e++)this.topHuShow.getChildAt(e).visible=!0,t=this.topHuShow_color.getChildAt(13-e),t.source=RES.getRes("color_value_"+this.colorArr1[e]+"_png")}},t.prototype.chuPais=function(e){this.chushihuashuju(),this.shoupaifz(e)},t.prototype.pengPai=function(e){this.chushihuashuju(),this.shoupaifz(e)},t.prototype.moPais=function(e){this.chushihuashuju(),this.shoupaifz(e,1)},t.prototype.zhimo=function(e){this.chushihuashuju();var t=_.initial(e);this.shoupaifz(t)},t.prototype.shoupaifz=function(e,t){try{var i=void 0;this.topHuShow.visible=!0;for(var o=0;o<e.length;o++)this.topHuShow.getChildAt(o).visible=!0,this.topHuShow_color.getChildAt(13-o).visible=!0,i=this.topHuShow_color.getChildAt(13-o),i.source=RES.getRes("color_value_"+e[o]+"_png")}catch(r){LogUtils.logI("cuol")}},t.prototype.huansanzhang=function(e){for(var t=0;t<e.length;t++)for(var i=0;i<this.arrysValues.length;i++)e[t]==this.arrysValues[i]&&this.arrysValues.splice(i,1);this.chushihuashuju(),this.shoupaifz(this.arrysValues)},t.prototype.initArr=function(e){this.arrysValues=[],this.chushihuashuju();var t;for(var i in e)for(var o=e[i],r=0;o>r;r++)this.arrysValues.push(i);this.topHuShow.visible=!0;for(var r=0;r<this.arrysValues.length;r++)this.topHuShow.getChildAt(r).visible=!0,this.topHuShow_color.getChildAt(13-r).visible=!0,t=this.topHuShow_color.getChildAt(13-r),t.source=RES.getRes("color_value_"+this.arrysValues[r]+"_png")
},t.prototype.chushihuashuju=function(){this.topHuShow.visible=!1;for(var e=0;14>e;e++)this.topHuShow.getChildAt(e).visible=!1,this.topHuShow_color.getChildAt(e).visible=!1},t}(eui.Component);e.TopShowPai=t,__reflect(t.prototype,"majiang.TopShowPai")}(majiang||(majiang={}));var HSZOrderEnum;!function(e){e[e.SSZ=0]="SSZ",e[e.NSZ=1]="NSZ",e[e.DM=2]="DM"}(HSZOrderEnum||(HSZOrderEnum={}));var MajiangStatusEnum;!function(e){e[e.FAPAI=0]="FAPAI",e[e.READY=1]="READY",e[e.TASK=2]="TASK",e[e.MINE_CHUPAI=3]="MINE_CHUPAI",e[e.QINGQUE=4]="QINGQUE",e[e.HSZ=5]="HSZ",e[e.ANI=6]="ANI",e[e.OTHER_CHUPAI=7]="OTHER_CHUPAI",e[e.BLANK=8]="BLANK",e[e.CHUPAI_TASK=9]="CHUPAI_TASK",e[e.OVER=10]="OVER"}(MajiangStatusEnum||(MajiangStatusEnum={}));var PlayerStatusEnum;!function(e){e[e.IDLE=0]="IDLE",e[e.RUUNING=1]="RUUNING"}(PlayerStatusEnum||(PlayerStatusEnum={}));var PomeloStateEnum;!function(e){e[e.INIT=0]="INIT",e[e.DISCONNECT=1]="DISCONNECT",e[e.CONNECT=2]="CONNECT"}(PomeloStateEnum||(PomeloStateEnum={}));var game;!function(e){var t=function(){function t(){if(this.delayTime=0,t._instance)throw new Error("DateTimer使用单例")}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.updateServerTime=function(e){this.delayTime=Date.now()-e},Object.defineProperty(t.prototype,"now",{get:function(){return Math.floor(Date.now()-this.delayTime)},enumerable:!0,configurable:!0}),t.prototype.run=function(){this.run1sTicker(),this.runTicker()},t.prototype.run1sTicker=function(){var e=new egret.Timer(1e3);e.addEventListener(egret.TimerEvent.TIMER,this.onOneSecondTimer,this),e.start(),this._last1sTime=egret.getTimer()},t.prototype.onOneSecondTimer=function(){var t=egret.getTimer(),i=t-this._last1sTime;this._last1sTime=t,e.UpdateTickerManager.onesec.update(i)},t.prototype.runTicker=function(){var e=new egret.Timer(33);e.addEventListener(egret.TimerEvent.TIMER,this.onEnterFrameTimer,this),e.start(),this._lastFpsTime=egret.getTimer()},t.prototype.onEnterFrameTimer=function(){var t=egret.getTimer(),i=t-this._lastFpsTime;this._lastFpsTime=t,e.UpdateTickerManager.instance.update(i)},t}();e.DateTimeManager=t,__reflect(t.prototype,"game.DateTimeManager")}(game||(game={}));var EventAutoRelease=function(){function e(e,t,i){this.type=e,this.callback=t,this.thisObj=i}return e}();__reflect(EventAutoRelease.prototype,"EventAutoRelease");var EventManager=function(e){function t(i){var o=e.call(this,i)||this;if(o.lock=!1,o.autoReleaseArr=[],t._instance)throw new Error("EventManager使用单例 ");return o.init(),o}return __extends(t,e),Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=new egret.Timer(2e3);e.addEventListener(egret.TimerEvent.TIMER,this.autoReleaseTick,this),e.start()},t.prototype.addEvent=function(e,t,i,o){void 0===o&&(o=!1),this.addEventListener(e,t,i),o&&i instanceof egret.DisplayObject&&this.autoReleaseArr.push(new EventAutoRelease(e,t,i))},t.prototype.removeEvent=function(e,t,i){this.removeEventListener(e,t,i)},t.prototype.dispatch=function(e,t){void 0===t&&(t=null),this.lock||this.dispatchEventWith(e,!1,t)},t.prototype.autoReleaseTick=function(){for(var e=this.autoReleaseArr.length-1;e>=0;e--){var t=this.autoReleaseArr[e];t.thisObj.stage||(this.removeEvent(t.type,t.callback,t.thisObj),this.autoReleaseArr.splice(e,1))}},t}(egret.EventDispatcher);__reflect(EventManager.prototype,"EventManager");var GameCacheManager=function(){function e(){if(this._cache=new HashMap,e._instance)throw new Error("DateTimer使用单例")}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.getCache=function(e,t){void 0===t&&(t=null);var i=this._cache.get(e);return!i&&t&&(i=new t,this._cache.put(e,i)),i},e.prototype.getMcCache=function(e,t,i){var o=this,r=this._cache.get(t);return r?(r.gotoAndStop(0),i&&i(r),r):game.MCUtils.getMc(e,function(e){return e?(o._cache.put(t,e),i&&i(e),e):void 0})},e.prototype.setCache=function(e,t){this._cache.put(e,t)},e}();__reflect(GameCacheManager.prototype,"GameCacheManager");var GameLayerManager=function(e){function t(){var t=e.call(this)||this;return t.sceneLayer=new eui.UILayer,t.mainLayer=new eui.UILayer,t.panelLayer=new eui.UILayer,t.effectLayer=new eui.UILayer,t.maskLayer=new eui.UILayer,t.loadLayer=new eui.UILayer,t.init(),t}return __extends(t,e),t.gameLayer=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.init=function(){this.touchThrough=!0,this.sceneLayer.touchThrough=!0,this.mainLayer.touchThrough=!0,this.panelLayer.touchThrough=!0,this.effectLayer.touchThrough=!0,this.maskLayer.touchThrough=!0,this.loadLayer.touchThrough=!0,this.addChild(this.sceneLayer),this.addChild(this.mainLayer),this.addChild(this.panelLayer),this.addChild(this.effectLayer),this.addChild(this.maskLayer),this.addChild(this.loadLayer)},t}(eui.UILayer);__reflect(GameLayerManager.prototype,"GameLayerManager");var PopUpManager;!function(e){function t(e,t,i,o,r,n){if(void 0===t&&(t=!1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===n&&(n=!1),!GameLayerManager.gameLayer().panelLayer.contains(e)){if(e.name="Panel"+e.hashCode,e.scaleX=1,e.scaleY=1,e.x=0,e.y=0,e.alpha=1,t){var a=new egret.Sprite;a.graphics.clear(),a.graphics.beginFill(0,.65),a.graphics.drawRect(0,0,GameConfig.curWidth(),GameConfig.curHeight()),a.graphics.endFill(),a.name="Drak"+e.hashCode,a.width=GameConfig.curWidth(),a.height=GameConfig.curHeight(),GameLayerManager.gameLayer().panelLayer.contains(a)||GameLayerManager.gameLayer().panelLayer.addChild(a),a.touchEnabled=!0,egret.Tween.get(a).to({alpha:1},150),a.visible=!0}GameLayerManager.gameLayer().panelLayer.addChild(e),GameConfig.curPanel=e,0!=i?(e.x=GameConfig.curWidth()/2-i/2,e.y=GameConfig.curHeight()/2-o/2-e.anchorOffsetY):(i=e.width,o=e.height);var s=GameConfig.curWidth()/2-i/2,h=GameConfig.curHeight()/2-o/2;switch(r){case 0:break;case 7:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+o/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4+e.anchorOffsetX,y:e.y-o/4+e.anchorOffsetY},600,egret.Ease.elasticOut);break;case 1:e.alpha=0,e.scaleX=.5,e.scaleY=.5,e.x=e.x+i/4,e.y=e.y+o/4,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x-i/4+e.anchorOffsetX,y:e.y-o/4+e.anchorOffsetY},300,egret.Ease.backOut);break;case 2:e.alpha=0,e.scaleX=.5,e.scaleY=.5,egret.Tween.get(e).to({alpha:1,scaleX:1,scaleY:1,x:e.x,y:e.y},600,egret.Ease.elasticOut);break;case 3:n?(e.x=-i,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=-i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 4:n?(e.x=i,egret.Tween.get(e).to({x:s},500,egret.Ease.cubicOut)):(e.x=i,egret.Tween.get(e).to({x:0},500,egret.Ease.cubicOut));break;case 5:n?(e.y=-o,egret.Tween.get(e).to({y:h},500,egret.Ease.cubicOut)):(e.y=-o,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut));break;case 6:n?(e.y=GameConfig.curHeight(),egret.Tween.get(e).to({y:h},500,egret.Ease.cubicOut)):(e.y=o,egret.Tween.get(e).to({y:0},500,egret.Ease.cubicOut))}}}function i(e,t){void 0===t&&(t=0);var i=this;return new Promise(function(o,r){var n="Drak"+e.hashCode,a=GameLayerManager.gameLayer().panelLayer.getChildByName(n),s=function(){GameLayerManager.gameLayer().panelLayer.contains(a)&&GameLayerManager.gameLayer().panelLayer.removeChild(a)};switch(a&&egret.Tween.get(a).to({alpha:0},100).call(s,i),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0,x:e.x+e.width/2,y:e.y+e.height/2},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var h=500;0==t&&(h=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(e)&&(GameLayerManager.gameLayer().panelLayer.removeChild(e),o())},i,h)})}function o(e,t){void 0===t&&(t=0);var i="Drak"+e.hashCode,o=GameLayerManager.gameLayer().panelLayer.getChildByName(i),r=function(){GameLayerManager.gameLayer().panelLayer.contains(o)&&GameLayerManager.gameLayer().panelLayer.removeChild(o)};switch(o&&egret.Tween.get(o).to({alpha:0},100).call(r,this),t){case 0:break;case 1:egret.Tween.get(e).to({alpha:0,scaleX:0,scaleY:0},300);break;case 2:break;case 3:egret.Tween.get(e).to({x:e.width},500,egret.Ease.cubicOut);break;case 4:egret.Tween.get(e).to({x:-e.width},500,egret.Ease.cubicOut);break;case 5:egret.Tween.get(e).to({y:e.height},500,egret.Ease.cubicOut);break;case 6:egret.Tween.get(e).to({y:-e.height},500,egret.Ease.cubicOut)}var n=500;0==t&&(n=0),egret.setTimeout(function(){GameLayerManager.gameLayer().panelLayer.contains(e)&&(GameLayerManager.gameLayer().panelLayer.removeChild(e),e=null)},this,n)}function r(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1),GameLayerManager.gameLayer().sceneLayer.contains(e)||GameLayerManager.gameLayer().sceneLayer.addChild(e)}function n(e){GameLayerManager.gameLayer().sceneLayer.contains(e)&&GameLayerManager.gameLayer().sceneLayer.removeChild(e)}function a(e,t,i){void 0===t&&(t=1e3),void 0===i&&(i=!1),game.ToastTip.popTip(e,t,i)}e.addPopUp=t,e.removePopUpAsync=i,e.removePopUp=o,e.addSceneUp=r,e.removeSceneUp=n,e.popTip=a}(PopUpManager||(PopUpManager={}));var game;!function(e){var t=function(){function t(){if(this.socketPath="ws://192.168.10.161:6565",this.isRunning=!0,this.callbackList=new HashMap,this.sequene=1,t._instance)throw new Error("DateTimer使用单例");this.createSocket()}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.createSocket=function(){this.socket=new egret.WebSocket,this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.socket.connectByUrl(this.socketPath)},t.prototype.onSocketOpen=function(){LogUtils.logD("打开连接")},t.prototype.onSocketClose=function(){LogUtils.logD("onSocketClose")},t.prototype.onSocketError=function(){LogUtils.logD("onSocketError")},t.prototype.onReceiveMessage=function(i){if(t.instance.isRunning){var o,r=this.socket.readUTF();if(r&&(o=JSON.parse(r)),o){if(o.type)return void e.AppFacade.getInstance().sendNotification(o.type,o.data);if(o.sequene){var n=this.callbackList.get(o.sequene);return void(n&&(n(o),this.callbackList.remove(o.sequene)))}}}},t}();e.SocketManager=t,__reflect(t.prototype,"game.SocketManager")}(game||(game={}));var game;!function(e){var t=function(){function t(){this.allUpdateObjArr=[]}return Object.defineProperty(t,"instance",{get:function(){return t._instance||(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onesec",{get:function(){return t._onesec||(t._onesec=new t),t._onesec},enumerable:!0,configurable:!0}),t.prototype.add=function(t){e.Utils.isElinArr(t,this.allUpdateObjArr)||this.allUpdateObjArr.push(t)},t.prototype.remove=function(e){for(var t=this.allUpdateObjArr.length,i=0;t>i;i++)e==this.allUpdateObjArr[i]&&this.allUpdateObjArr.splice(i,1)},t.prototype.update=function(e){for(var t=0;t<this.allUpdateObjArr.length;t++)this.allUpdateObjArr[t].update(e)},t}();e.UpdateTickerManager=t,__reflect(t.prototype,"game.UpdateTickerManager")}(game||(game={}));var HallForwardFac=function(){function e(){}return e.redirectHall=function(){if(Global.gameProxy.roomState&&1==Global.gameProxy.roomState)return void game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_HOME);switch(ServerConfig.gid){case"mjxlch":case"mjxzdd":game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_HOME);break;default:game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_HOME)}},e.redirectScene=function(e,t,i){var o=e.roomInfo,r=o.gameId;switch(Global.gameProxy.roomState=null,r){case"mjxlch":case"mjxzdd":Global.gameProxy.currentSceneId=t.sceneId,Global.gameProxy.setRoomInfo(e),Global.gameProxy.diWen=e.roomInfo.gameId,game.DateTimeManager.instance.updateServerTime(e.roomInfo.serverTime),Global.playerProxy.playerStatus=PlayerStatusEnum.RUUNING,Global.gameProxy.lastGameConfig.diFen=e.roomInfo.betBase,RotationLoading.instance.load("majiang","",function(){e.roomInfo&&e.roomInfo.playing?game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_MAJIANG):game.AppFacade.getInstance().sendNotification(SceneNotify.OPEN_MAJIANG_MATCH),i&&i()})}},e}();__reflect(HallForwardFac.prototype,"HallForwardFac");var majiang;!function(e){var t=function(){function e(){}return e.getDirectionSortByZhuang=function(e){var t=[];switch(e){case 1:t=["mine","right","top","left"];break;case 2:t=["right","top","left","mine"];break;case 3:t=["top","left","mine","right"];break;case 4:t=["left","mine","right","top"]}return t},e.getDirectionByMine=function(e){var t={};switch(e){case 1:t[1]="mine",t[2]="right",t[3]="top",t[4]="left";break;case 2:t[2]="mine",t[3]="right",t[4]="top",t[1]="left";break;case 3:t[3]="mine",t[4]="right",t[1]="top",t[2]="left";break;case 4:t[4]="mine",t[1]="right",t[2]="top",t[3]="left"}return t},e.checkMajiangSameColor=function(e,t){return Math.floor(e/10)==Math.floor(t/10)},e.getColorLatestNum=function(e){var t=_.groupBy(e,function(e){return Math.floor(e/10)}),i=t[1]?t[1].length:0,o=t[2]?t[2].length:0,r=t[3]?t[3].length:0,n=[{type:1,value:i},{type:2,value:o},{type:3,value:r}],a=_.sortBy(n,"value");return a[0].type},e.getBiliTypeStr=function(e,t,i){var o=t>0?"":"被";switch(e){case 0:return"房费";case 1:return o+"杠牌";case 2:return this.getHuTypeStr(e,t,i,Global.gameProxy.getMineIndex());case 3:return t>0?"查叫":"未听牌";case 4:return t>0?"查花猪":"花猪";case 5:return o+"退税"}},e.getHuTypeStr=function(e,t,i,o){return t>0?o==i?"自摸":"胡牌":o==i?"点炮":"被自摸"},e.getGangTypeStr=function(e,t){var i=t>0?"":"被";switch(e){case 1:case 3:return i+"刮风";case 2:case 4:return i+"下雨"}},e.findValueLess=function(e){var t=4,i=Global.gameProxy.getPlayers();for(var o in i){var r=i[o];r.cards&&o==Global.gameProxy.getMineIndex()+""&&(t-=this.findCountByArray(e,Global.gameProxy.getMineShuopaiArr())),r.gangCards&&(t-=4*this.findCountByArray(e,r.gangCards)),r.pengCards&&(t-=3*this.findCountByArray(e,r.pengCards)),r.playCards&&(t-=this.findCountByArray(e,r.playCards))}for(var n=Global.gameProxy.roomInfo.huTasks||[],a=0;a<n.length;a++)n[a].card==e&&0!=n[a].mainCard&&t--;return 0>t&&(t=0),t},e.findCountByArray=function(e,t){for(var i=0,o=0;o<t.length;o++)"object"==typeof t[o]?e==t[o].card&&i++:e==t[o]&&i++;return i},e.playCardSound=function(e,t){var i,o=1==e?"sc_boy_":"sc_girl_",r=MajiangConfig.getSoundConfig()[o][t];r[Math.floor(_.random(0,r.length-1))],Math.floor(t%10);switch(Math.floor(t/10)){case 1:i="tong";break;case 2:i="tiao";break;case 3:i="wan"}},e.playHPGSound=function(e,t){var i=1==e?"sc_boy_":"sc_girl_",o=this.hpgType(t),r=MajiangConfig.getSoundConfig()[i][o];r[Math.floor(_.random(0,r.length-1))];"xiayu"==o&&(o="gang")},e.hpgType=function(e){switch(e){case 1:return"peng";case 2:return"gang";case 3:return"xiayu";case 4:return"zimo";case 5:return"hu"}},e.playClick=function(){},e.updateCardsNum=function(e,t,i){var o=e[t];o?(o+=i,1>o?delete e[t]:e[t]=o):i>0&&(e[t]=i)},e}();e.MajiangUtils=t,__reflect(t.prototype,"majiang.MajiangUtils")}(majiang||(majiang={}));var ObjectPool=function(){function e(){}return e.produce=function(t,i){var o=e.cacheDict[t];if(o||(o=[]),o.length>0){var r=o.shift();return r}return null},e.reclaim=function(t,i){var o=e.cacheDict[t];o||(e.cacheDict[t]=[]),e.cacheDict[t].push(i)},e.cacheDict={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var PomeloForEgret;!function(e){var t=function(){function e(){this.JS_WS_CLIENT_TYPE="js-websocket",this.JS_WS_CLIENT_VERSION="0.0.5",this.RES_OK=200,this.RES_FAIL=500,this.RES_OLD_CLIENT=501,this.socket=null,this.callbacks={},this.handlers={},this.routeMap={},this.heartbeatInterval=0,this.heartbeatTimeout=0,this.nextHeartbeatTimeout=0,this.gapThreshold=100,this.heartbeatId=null,this.heartbeatTimeoutId=null,this.handshakeCallback=null,this.initCallback=null,this._callbacks={},this.reqId=0,console.group||(console.group=console.log,console.groupEnd=function(){console.log("----")},console.info=console.log,console.warn=console.log,console.error=console.log),this._message=new o,this._package=new i,this.socket=null,this.callbacks={},this.handlers={},this.routeMap={},this.heartbeatInterval=0,this.heartbeatTimeout=0,this.nextHeartbeatTimeout=0,this.gapThreshold=100,this.heartbeatId=null,this.heartbeatTimeoutId=null,this.handshakeCallback=null,this.handshakeBuffer={sys:{type:this.JS_WS_CLIENT_TYPE,version:this.JS_WS_CLIENT_VERSION},user:{}},this.initCallback=null,this.reqId=0,this.handlers[i.TYPE_HANDSHAKE]=this.handshake,this.handlers[i.TYPE_HEARTBEAT]=this.heartbeat,this.handlers[i.TYPE_DATA]=this.onData,this.handlers[i.TYPE_KICK]=this.onKick}return e.prototype.init=function(e,t){this.initCallback=t;var i=e.host,o=e.port;this.handshakeBuffer.user=e.user,this.handshakeCallback=e.handshakeCallback,this.initWebSocket(i,o,t)},e.prototype.initWebSocket=function(e,t,i){LogUtils.logD("[Pomelo] connect to:",e,t),this.socket=new egret.WebSocket,this.socket.type=egret.WebSocket.TYPE_BINARY,this.socket.addEventListener(egret.Event.CONNECT,this.onConnect,this),this.socket.addEventListener(egret.Event.CLOSE,this.onClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onMessage,this);var o;o=ServerConfig.PATH_CONFIG.socket_path_1?ServerConfig.PATH_CONFIG.socket_header+e+":"+t+ServerConfig.PATH_CONFIG.socket_path_1:ServerConfig.PATH_CONFIG.socket_header+e+":"+t,this.socket.connectByUrl(o)},e.prototype.on=function(e,t){(this._callbacks[e]=this._callbacks[e]||[]).push(t)},e.prototype.request=function(t,i,o){if(2===arguments.length&&"function"==typeof i?(o=i,i={}):i=i||{},t=t||i.route){this.reqId++,this.reqId>127&&(this.reqId=1);var r=this.reqId;e.DEBUG&&console.groupEnd(),this.sendMessage(r,t,i),this.callbacks[r]=o,this.routeMap[r]=t}},e.prototype.notify=function(e,t){this.sendMessage(0,e,t)},e.prototype.onMessage=function(e){var t=new egret.ByteArray;this.socket.readBytes(t),t.length>0&&this.processPackage(this._package.decode(t))},e.prototype.sendMessage=function(e,t,o){var r;r=this._message.encode(e,t,o),r=this._package.encode(i.TYPE_DATA,r),this.send(r)},e.prototype.onConnect=function(e){LogUtils.logD("[Pomelo] connect success",e),this.socket&&(this.socket.addEventListener(egret.Event.CLOSE,this.onClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this),this.socket.writeBytes(this._package.encode(i.TYPE_HANDSHAKE,r.strencode(JSON.stringify(this.handshakeBuffer)))),this.socket.flush())},e.prototype.onClose=function(t){LogUtils.logD("[Pomelo] connect close:",t),this.emit(e.EVENT_CLOSE,t),this.emit(e.EVEMT_DISCONNECT,t),EventManager.instance.dispatch(e.EVENT_CLOSE,t),EventManager.instance.dispatch(e.EVEMT_DISCONNECT,t),this.socket&&(this.socket.removeEventListener(egret.Event.CLOSE,this.onClose,this),this.socket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onIOError,this))},e.prototype.onIOError=function(t){LogUtils.logD("[Pomelo] connect close:",t),EventManager.instance.dispatch(e.EVENT_IO_ERROR,t)},e.prototype.onKick=function(t){this.emit(e.EVENT_KICK,t)},e.prototype.onData=function(e){var t=this._message.decode(e);t.id>0&&(t.route=this.routeMap[t.id],delete this.routeMap[t.id],!t.route)||this.processMessage(t)},e.prototype.processMessage=function(t){if(!t.id)return e.DEBUG&&(console.group("EVENT:"),console.info("Route:",t.route),console.info("Msg:",t.body),console.groupEnd()),void this.emit(t.route,t.body);e.DEBUG&&(console.group("RESPONSE:"),console.info("Id:",t.id),console.info("Msg:",t.body),console.groupEnd());var i=this.callbacks[t.id];if(delete this.callbacks[t.id],"function"==typeof i){if(t.body&&500==t.body.code){var o={code:500,desc:"服务器内部错误",key:"INTERNAL_ERROR"};t.body.error=o}i(t.body)}},e.prototype.heartbeat=function(e){if(this.heartbeatInterval){var t=this._package.encode(i.TYPE_HEARTBEAT);if(this.heartbeatTimeoutId&&(egret.clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null),!this.heartbeatId){var o=this;o.heartbeatId=egret.setTimeout(function(){o.heartbeatId=null,o.send(t),o.nextHeartbeatTimeout=Date.now()+o.heartbeatTimeout,o.heartbeatTimeoutId=egret.setTimeout(o.heartbeatTimeoutCb.bind(o,e),o,o.heartbeatTimeout)},o,o.heartbeatInterval)}}},e.prototype.heartbeatTimeoutCb=function(t){var i=this.nextHeartbeatTimeout-Date.now();i>this.gapThreshold?this.heartbeatTimeoutId=egret.setTimeout(this.heartbeatTimeoutCb,this,i):(this.emit(e.EVENT_HEART_BEAT_TIMEOUT,t),this.emit(e.EVEMT_DISCONNECT,t),this._disconnect())},e.prototype.off=function(e,t){this.removeAllListeners(e,t)},e.prototype.removeAllListeners=function(e,t){if(0==arguments.length)return void(this._callbacks={});var i=this._callbacks[e];if(i){if(e&&!t)return void delete this._callbacks[e];var o=this.index(i,t._off||t);~o&&i.splice(o,1)}},e.prototype.index=function(e,t){if([].indexOf)return e.indexOf(t);for(var i=0;i<e.length;++i)if(e[i]===t)return i;return-1},e.prototype.disconnect=function(){this._disconnect()},e.prototype._disconnect=function(){this.socket&&this.socket.connected&&this.socket.close(),this.socket=null,this.heartbeatId&&(egret.clearTimeout(this.heartbeatId),this.heartbeatId=null),this.heartbeatTimeoutId&&(egret.clearTimeout(this.heartbeatTimeoutId),this.heartbeatTimeoutId=null)},e.prototype.processPackage=function(e){this.handlers[e.type].apply(this,[e.body])},e.prototype.handshake=function(t){var o=JSON.parse(r.strdecode(t));if(o.code===this.RES_OLD_CLIENT)return void this.emit(e.EVENT_IO_ERROR,"client version not fullfill");if(o.code!==this.RES_OK)return void this.emit(e.EVENT_IO_ERROR,"handshake fail");this.handshakeInit(o);var n=this._package.encode(i.TYPE_HANDSHAKE_ACK);this.send(n),this.initCallback&&(this.initCallback(o),this.initCallback=null)},e.prototype.handshakeInit=function(e){e.sys&&(a.init(e.sys.dict),n.init(e.sys.protos)),e.sys&&e.sys.heartbeat?(this.heartbeatInterval=1e3*e.sys.heartbeat,this.heartbeatTimeout=2*this.heartbeatInterval):(this.heartbeatInterval=0,this.heartbeatTimeout=0),"function"==typeof this.handshakeCallback&&this.handshakeCallback(e.user)},e.prototype.send=function(e){this.socket&&this.socket.connected&&(this.socket.writeBytes(e),this.socket.flush())},e.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=[].slice.call(arguments,0),r=this._callbacks[e];if(r){r=r.slice(0);for(var n=0,a=r.length;a>n;++n)r[n].apply(this,o,e)}return this},e.DEBUG=!1,e.EVENT_IO_ERROR="io-error",e.EVENT_CLOSE="pomelo-close",e.EVEMT_DISCONNECT="disconnect",e.EVENT_KICK="onKick",e.EVENT_HEART_BEAT_TIMEOUT="heartbeat timeout",e}();e.Pomelo=t,__reflect(t.prototype,"PomeloForEgret.Pomelo");var i=function(){function e(){}return e.prototype.encode=function(e,t){var i=t?t.length:0,o=new egret.ByteArray;return o.writeByte(255&e),o.writeByte(i>>16&255),o.writeByte(i>>8&255),o.writeByte(255&i),t&&o.writeBytes(t,0,t.length),o},e.prototype.decode=function(e){if(!(e.length<=0)){var t,i=e.readUnsignedByte(),o=(e.readUnsignedByte()<<16|e.readUnsignedByte()<<8|e.readUnsignedByte())>>>0;return e.bytesAvailable>=o?(t=new egret.ByteArray,o&&e.readBytes(t,0,o)):LogUtils.logI("[Package] no enough length for current type:"+i),{type:i,body:t,length:o}}},e.TYPE_HANDSHAKE=1,e.TYPE_HANDSHAKE_ACK=2,e.TYPE_HEARTBEAT=3,e.TYPE_DATA=4,e.TYPE_KICK=5,e}();__reflect(i.prototype,"Package",["IPackage"]);var o=function(){function e(){}return e.prototype.encode=function(t,i,o){var s=new egret.ByteArray,h=t?e.TYPE_REQUEST:e.TYPE_NOTIFY,c=n.encode(i,o)||r.strencode(JSON.stringify(o)),l=a.getID(i)||i;if(s.writeByte(h<<1|("string"==typeof l?0:1)),t)do{var u=t%128,p=Math.floor(t/128);0!=p&&(u+=128),s.writeByte(u),t=p}while(0!=t);return l&&("string"==typeof l?(s.writeByte(255&l.length),s.writeUTFBytes(l)):(s.writeByte(l>>8&255),s.writeByte(255&l))),c&&s.writeBytes(c),s},e.prototype.decode=function(t){var i,o=t.readUnsignedByte(),s=o&e.MSG_COMPRESS_ROUTE_MASK,h=o>>1&e.MSG_TYPE_MASK,c=0;if(h===e.TYPE_REQUEST||h===e.TYPE_RESPONSE){var l=0;do{var u=t.readUnsignedByte();c+=(127&u)*Math.pow(2,7*l),l++}while(u>=128)}if(h===e.TYPE_REQUEST||h===e.TYPE_NOTIFY||h===e.TYPE_PUSH)if(s)i=t.readUnsignedShort();else{var p=t.readUnsignedByte();i=p?t.readUTFBytes(p):""}c||"string"==typeof i||(i=a.getName(i));var g=n.decode(i,t)||JSON.parse(r.strdecode(t));return{id:c,type:h,route:i,body:g}},e.MSG_FLAG_BYTES=1,e.MSG_ROUTE_CODE_BYTES=2,e.MSG_ID_MAX_BYTES=5,e.MSG_ROUTE_LEN_BYTES=1,e.MSG_ROUTE_CODE_MAX=65535,e.MSG_COMPRESS_ROUTE_MASK=1,e.MSG_TYPE_MASK=7,e.TYPE_REQUEST=0,e.TYPE_NOTIFY=1,e.TYPE_RESPONSE=2,e.TYPE_PUSH=3,e}();__reflect(o.prototype,"Message",["IMessage"]);var r=function(){function e(){}return e.strencode=function(e){var t=new egret.ByteArray;return t.length=e.length,t.writeUTFBytes(e),t},e.strdecode=function(e){return e.readUTFBytes(e.bytesAvailable)},e}();__reflect(r.prototype,"Protocol");var n=function(){function e(){}return e.init=function(e){this._clients=e&&e.client||{},this._servers=e&&e.server||{}},e.encode=function(e,t){var i=this._clients[e];return i?this.encodeProtos(i,t):null},e.decode=function(e,t){var i=this._servers[e];return i?this.decodeProtos(i,t):null},e.encodeProtos=function(e,t){var i=new egret.ByteArray;for(var o in t)if(e[o]){var r=e[o];switch(r.option){case"optional":case"required":i.writeBytes(this.encodeTag(r.type,r.tag)),this.encodeProp(t[o],r.type,e,i);break;case"repeated":t[o]&&t[o].length>0&&this.encodeArray(t[o],r,e,i)}}return i},e.decodeProtos=function(e,t){for(var i={};t.bytesAvailable;){var o=this.getHead(t),r=e.__tags[o.tag];switch(e[r].option){case"optional":case"required":i[r]=this.decodeProp(e[r].type,e,t);break;case"repeated":i[r]||(i[r]=[]),this.decodeArray(i[r],e[r].type,e,t)}}return i},e.encodeTag=function(e,t){var i=void 0!=this.TYPES[e]?this.TYPES[e]:2;return this.encodeUInt32(t<<3|i)},e.getHead=function(e){var t=this.decodeUInt32(e);return{type:7&t,tag:t>>3}},e.encodeProp=function(e,t,i,o){switch(t){case"uInt32":o.writeBytes(this.encodeUInt32(e));break;case"int32":case"sInt32":o.writeBytes(this.encodeSInt32(e));break;case"float":var r=new egret.ByteArray;r.endian=egret.Endian.LITTLE_ENDIAN,r.writeFloat(e),o.writeBytes(r);break;case"double":var n=new egret.ByteArray;n.endian=egret.Endian.LITTLE_ENDIAN,n.writeDouble(e),o.writeBytes(n);break;case"string":o.writeBytes(this.encodeUInt32(e.length)),o.writeUTFBytes(e);break;default:var a=i.__messages[t]||this._clients["message "+t];if(a){var s=this.encodeProtos(a,e);o.writeBytes(this.encodeUInt32(s.length)),o.writeBytes(s)}}},e.decodeProp=function(t,i,o){switch(t){case"uInt32":return this.decodeUInt32(o);case"int32":case"sInt32":return this.decodeSInt32(o);case"float":var r=new egret.ByteArray;o.readBytes(r,0,4),r.endian=egret.Endian.LITTLE_ENDIAN;o.readFloat();return r.readFloat();case"double":var n=new egret.ByteArray;return o.readBytes(n,0,8),n.endian=egret.Endian.LITTLE_ENDIAN,n.readDouble();case"string":var a=this.decodeUInt32(o);return o.readUTFBytes(a);default:var s=i&&(i.__messages[t]||this._servers["message "+t]);if(s){var h=this.decodeUInt32(o);if(h){var c=new egret.ByteArray;o.readBytes(c,0,h)}return h?e.decodeProtos(s,c):!1}}},e.isSimpleType=function(e){return"uInt32"===e||"sInt32"===e||"int32"===e||"uInt64"===e||"sInt64"===e||"float"===e||"double"===e},e.encodeArray=function(e,t,i,o){var r=this.isSimpleType;if(r(t.type)){o.writeBytes(this.encodeTag(t.type,t.tag)),o.writeBytes(this.encodeUInt32(e.length));for(var n=this.encodeProp,a=0;a<e.length;a++)n(e[a],t.type,i,o)}else for(var s=this.encodeTag,h=0;h<e.length;h++)o.writeBytes(s(t.type,t.tag)),this.encodeProp(e[h],t.type,i,o)},e.decodeArray=function(e,t,i,o){var r=this.isSimpleType,n=this.decodeProp;if(r(t))for(var a=this.decodeUInt32(o),s=0;a>s;s++)e.push(n(t,i,o));else e.push(n(t,i,o))},e.encodeUInt32=function(e){var t=new egret.ByteArray;do{var i=e%128,o=Math.floor(e/128);0!==o&&(i+=128),t.writeByte(i),e=o}while(0!==e);return t},e.decodeUInt32=function(e){for(var t=0,i=0;i<e.length;i++){var o=e.readUnsignedByte();if(t+=(127&o)*Math.pow(2,7*i),128>o)return t}return t},e.encodeSInt32=function(e){return e=0>e?2*Math.abs(e)-1:2*e,this.encodeUInt32(e)},e.decodeSInt32=function(e){var t=this.decodeUInt32(e),i=t%2===1?-1:1;return t=(t%2+t)/2*i},e.TYPES={uInt32:0,sInt32:0,int32:0,"double":1,string:2,message:2,"float":5},e._clients={},e._servers={},e}();__reflect(n.prototype,"Protobuf");var a=function(){function e(){}return e.init=function(e){this._names=e||{};var t=this._names,i=this._ids;for(var o in t)i[t[o]]=o},e.getID=function(e){return this._names[e]},e.getName=function(e){return this._ids[e]},e._ids={},e._names={},e}();__reflect(a.prototype,"Routedic")}(PomeloForEgret||(PomeloForEgret={}));var FrameUtils=function(){function e(){}return e.postMessage=function(t){if(window.parent&&!e.isError)try{if(window.parent&&window.parent.showTips)return void window.parent.showTips(t)}catch(i){e.isError=!0}},e.showTips=function(t){if(!e.isError)try{return window.parent&&window.parent.showTips?(window.parent.showTips(t),!0):!1}catch(i){return e.isError=!0,!1}},e.iphoneXScreen=function(e,t){1280==e&&t>=735&&780>=t?this.showTips(0):1436==e&&720==t?this.showTips(1):1468==e&&720==t?this.showTips(1):1594==e&&720==t?this.showTips(0):e>=1570&&1630>=e&&720==t?this.showTips(0):this.showTips(1)},e.flushWindow=function(){window.parent?window.location.reload():window.location.reload()},e.goRecharge=function(){ServerConfig.RECHARGE_URL&&"null"!=ServerConfig.RECHARGE_URL},e.goHome=function(){ServerConfig.HOME_PAGE_URL&&"null"!=ServerConfig.HOME_PAGE_URL},e.isError=!1,e.topFrame="http://192.168.2.5:9023",e}();__reflect(FrameUtils.prototype,"FrameUtils");var ServerConfig=function(){function e(){}return e.USER_NAME="skt_faker",e.PATH_TYPE=PathTypeEnum.CQ9_CLIENT_PRODUCT,e}();__reflect(ServerConfig.prototype,"ServerConfig");var ImageUtils=function(){function e(){}return e.showRes=function(e,t){this.getRes(t,function(t){e.source=t})},e.getRes=function(e,t){var i=RES.getRes(e);return i?t(i):(RES.getResAsync(e,function(e){t(e)},this),null)},e}();__reflect(ImageUtils.prototype,"ImageUtils");var LogUtils=function(){function e(){}return e.logDJ=function(t){e.loglevel==e.DEBUG&&console.log("json param=%j",t)},e.logD=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e.loglevel==e.DEBUG&&console.log("debug"+t,i)},e.logE=function(t){e.loglevel==e.ERROR&&console.log("error ",t)},e.logI=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e.loglevel==e.INFO&&console.log("info"+t,i)},e.DEBUG=1,e.INFO=2,e.ERROR=3,e.loglevel=1,e}();__reflect(LogUtils.prototype,"LogUtils");var game;!function(e){var t=function(){function e(){}return e.reclaim1=function(t,i){var o=e.mcMap.get(t);return o||(o=[],e.mcMap.put(t,o)),o.push(i),!0},e.getMc=function(t,i,o){function r(e){var i=RES.getRes(t+"_png"),o=RES.getRes(t+"_json"),r=new egret.MovieClipDataFactory(o,i),n=new egret.MovieClip(r.generateMovieClipData(e));return n.fac=r,n.touchEnabled=!1,n}var n=this;void 0===i&&(i=null),void 0===o&&(o="");var a=RES.getRes(t+"_png");if(a){var s=r(o);return i&&i(s),s}return RES.getResAsync(t+"_png",function(){RES.getResAsync(t+"_json",function(){var n=r(o);n&&e.mcMap.put(t,n),i&&i(n)},n)},this),null},e.changeAction=function(e,t){var i=e.fac;e.movieClipData=i.generateMovieClipData(t)},e.mcMap=new HashMap,e}();e.MCUtils=t,__reflect(t.prototype,"game.MCUtils")}(game||(game={}));var NativeApi=function(){function e(){if(this.openBetMode=!1,this.openBetPlayForFunMode=!1,this.isGcmEnabled=!1,this.isiPad=!1,this.isiPhone=!1,this.isiPhoneIOS7=!1,this.isiPhoneIOS8=!1,this.isiPhoneIOS9=!1,this.isiPod=!1,this.isAndroidDevice=!1,this.isSamsungS=!1,this.isOneX=!1,this.isHTCOne=!1,this.isAndroid23Device=!1,this.isAndroid400=!1,this.isAndroid410=!1,this.isAndroid420=!1,this.isAndroid430=!1,this.isAndroidTablet=!1,this.isAndroid3Tablet=!1,this.isDesktop=!1,this.has3DTransforms=!1,this.isChrome=!1,this.isChrome280=!1,this.isSafari=!1,this.isChromeForIOS=!1,e._instance)throw new Error("DateTimer使用单例")
}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.initApi=function(){var e,t,i=navigator.userAgent;/callbackurl/i.test(window.location.search)&&(/integration=openbet/i.test(window.location.search)||/openbet\.user_id/i.test(window.location.search))&&(this.openBetMode=!0),/integration=openbet/i.test(window.location.search)&&!this.openBetMode&&(this.openBetPlayForFunMode=!0),/openbet.gcmMode=true/i.test(window.location.search)&&(this.isGcmEnabled=!0),i.match(/Chrome/i)&&(this.isChrome=!0,i.match(/Chrome\/28[\.\d]/i)&&(this.isChrome280=!0)),i.match(/CriOS/i)&&(this.isChromeForIOS=!0),i.match(/Safari/i)&&!this.isChromeForIOS&&(this.isSafari=!0),null!==i.match(/iPad/i)?this.isiPad=!0:i.match(/iPod/i)?this.isiPod=!0:i.match(/iPhone/i)?(e="3gs,4,4s",t="standard",e=568===window.screen.height?"5":e,e=667===window.screen.height?"6":e,t=window.matchMedia("(-webkit-min-device-pixel-ratio: 3)").matches&&"6"===e?"zoomed":t,e=window.matchMedia("(-webkit-min-device-pixel-ratio: 3)").matches?"6+":e,this.isiPhone={series:"iPhone",model:e,displayZoom:t}):i.match(/Android/i)||i.match(/HTC_Sensation/i)?(this.isAndroidDevice=!0,i.match(/Android 3[\.\d]+/i)?(this.isAndroid3Tablet=!0,this.isAndroidTablet=!0):i.match(/mobile/i)?i.match(/Android 2\.3/i)?this.isAndroid23Device=!0:i.match(/Android 4\.0/i)?this.isAndroid400=!0:i.match(/Android 4\.1/i)?this.isAndroid410=!0:i.match(/Android 4\.2/i)?this.isAndroid420=!0:i.match(/Android 4\.3/i)&&(this.isAndroid430=!0):this.isAndroidTablet=!0):this.isDesktop=!0,this.isiPhoneIOS7=i.indexOf("IEMobile")<0&&/(?:OS\s*[7]+_0(?:_\d+)?\s*)/i.test(i)&&!window.navigator.standalone&&(this.isiPhone||this.isiPod)&&this.isSafari,this.isiPhoneIOS8=/OS\s*8_/i.test(i)&&!window.navigator.standalone&&this.isiPhone&&this.isSafari,this.isiPhoneIOS9=/OS\s*9_/i.test(i)&&!window.navigator.standalone&&this.isiPhone&&this.isSafari,this.isiPhoneIOS10=/OS\s*10_/i.test(i)&&!window.navigator.standalone&&this.isiPhone&&this.isSafari,this.isiPhoneIOS11=/OS\s*11_/i.test(i)&&!window.navigator.standalone&&this.isiPhone&&this.isSafari,this.isiPhoneIOS12=/OS\s*12_/i.test(i)&&!window.navigator.standalone&&this.isiPhone&&this.isSafari,this.isiPhoneIOS13=/OS\s*13_/i.test(i)&&!window.navigator.standalone&&this.isiPhone&&this.isSafari,this.isiOS9=/OS\s*9_/i.test(i),this.isIphone4Or4s=this.isiPhone&&window.matchMedia("(-webkit-min-device-pixel-ratio: 2)").matches&&320===window.screen.width&&480===window.screen.height,this.isIphone5Or5sOr5c=this.isiPhone&&320===window.screen.width&&568===window.screen.height,i.match(/GT-I9100/)?this.isSamsungS={series:"samsungS",model:"s2"}:i.match(/GT-I9300/)?this.isSamsungS={series:"samsungS",model:"s3"}:(i.match(/GT-I9505/)||i.match(/GT-I9506/)||i.match(/GT-I9521/)||i.match(/GT-I9525/))&&(this.isSamsungS={series:"samsungS",model:"s4"}),this.isiOSDevice=this.isiPad||this.isiPhone||this.isiPod,this.isIphone3GS=this.isiOSDevice&&!window.matchMedia("(-webkit-min-device-pixel-ratio: 2)").matches&&320===window.screen.width&&480===window.screen.height,this.getIsIphoneX()},e.prototype.getIphoneBanben=function(){return(this.isiPhoneIOS11||this.isiPhoneIOS12||this.isiPhoneIOS13)&&this.isSafari?!0:!1},e.prototype.getIsIphoneX=function(){this.isiOSDevice&&812==screen.height&&375==screen.width&&(this.isIphoneX=!0)},e.prototype.showIsFirstLogin=function(){var e=egret.localStorage.getItem("firstlogin");return e||(e="1",egret.localStorage.setItem("firstlogin",e)),e},e.prototype.addPlayCount=function(){var e=egret.localStorage.getItem("firstlogin");e?(e=parseInt(e)+1+"",egret.localStorage.setItem("firstlogin",e)):(e="1",egret.localStorage.setItem("firstlogin",e))},e.prototype.getDeivice=function(){var e=navigator.userAgent;if(e.indexOf("MiuiBrowser")>-1)return"小米浏览器";if(e.indexOf("MQQBrowser")>-1)return"QQ浏览器";var t=e.indexOf("Opera")>-1;return t?"Opera":e.indexOf("Firefox")>-1?"FF":e.indexOf("Chrome")>-1?"Chrome":e.indexOf("Safari")>-1?"Safari":e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!t?"IE":"未知浏览器"},e}();__reflect(NativeApi.prototype,"NativeApi");var NumberFormat=function(){function e(){}return e.formatGold=function(e,t){if(1==t)return parseFloat(e).toFixed(2);if(e=parseFloat(e).toFixed(2),1e4>e)return e;var i=Math.floor(e/1e4),o=e%1e4,r=Math.floor(o/100),n=r+"";10>r&&(n="0"+r);var a=i+"."+n+"万";return a},e.formatGold_scence=function(e,t){return 1==t?parseFloat(e).toFixed(2):e=parseFloat(e).toFixed(2)},e.getNNTimeStr=function(e){var t=Math.ceil(e/1e3);return 10>t?1==t?"0"+t:"0"+t:0>=t?"00":t+""},e.getTimeStr=function(e){var t=Math.ceil(e/1e3);return 10>t?1==t?"0 "+t:"0"+t:0>=t?"00":t+""},e}();__reflect(NumberFormat.prototype,"NumberFormat");var RegUtils;!function(e){function t(e){var t=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return t.test(e)?!0:!1}function i(e){if(n(e))return!1;var t=/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g;return t.test(e)&&Number(RegExp.$1)<256&&Number(RegExp.$2)<256&&Number(RegExp.$3)<256&&Number(RegExp.$4)<256?!0:!1}function o(e){var t=/^(((13[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1}))+\d{8})$/;return t.test(e)?!0:!1}function r(e){var t=/^[0][1-9]{2,3}-[0-9]{5,10}$/,i=/^[1-9]{1}[0-9]{5,8}$/;return e.length>9?t.test(e)?!0:!1:i.test(e)?!0:!1}function n(e){if(""==e)return!0;var t="^[ ]+$",i=new RegExp(t);return i.test(e)}function a(e){var t=/^[-]{0,1}[0-9]{1,}$/;return t.test(e)}function s(e){var t="^[0-9]+$",i=new RegExp(t);return-1!=e.search(i)?!0:!1}function h(e){var t="^[0-9]+[.][0-9]{0,3}$",i=new RegExp(t);return i.test(e)?!0:!1}function c(e){if(n(e))return!1;var t=/^[\u4E00-\u9FA5]{2,4}$/;return t.test(e)}function l(e){var t=/^[\u4E00-\u9FA5]/;return t.test(e)}function u(e,t){var i=" ",o=-1;if(0==t||1==t){for(;" "==i;)++o,i=e.substr(o,1);e=e.substring(o)}if(0==t||2==t){for(i=" ",o=e.length;" "==i;)--o,i=e.substr(o,1);e=e.substring(0,o+1)}return e}e.checkEmail=t,e.isIP=i,e.checkMobile=o,e.checkPhone=r,e.isNull=n,e.isInteger=a,e.isNumber=s,e.isMoney=h,e.isRealName=c,e.checkIsChinese=l,e.cTrim=u}(RegUtils||(RegUtils={}));var ResConfig=function(){function e(){}return e.baseResPath="resource/gameAssets/",e.baseAfterResPath="resource/gameAssets/afterloading/texture/",e.bigResPath="resource/gameAssets/afterloading/texture/big/",e.headerResPath="resource/gameAssets/afterloading/texture/header/",e}();__reflect(ResConfig.prototype,"ResConfig");var game;!function(e){var t=function(){function e(){}return e.removeFromParent=function(e){e&&e.parent&&e.parent.removeChild(e)},e.setAnchorCenter=function(e,t){if(t)for(var i=0;i<e.parent.numChildren;i++)0==e.parent.getChildAt(i).anchorOffsetX&&(e.parent.getChildAt(i).anchorOffsetX=e.parent.getChildAt(i).width/2,e.parent.getChildAt(i).anchorOffsetY=e.parent.getChildAt(i).height/2,e.parent.getChildAt(i).x+=e.parent.getChildAt(i).width/2,e.parent.getChildAt(i).y+=e.parent.getChildAt(i).height/2);else 0==e.anchorOffsetX&&(e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.width/2,e.y+=e.height/2)},e.resetAnchorPoint=function(e){e.x-=e.anchorOffsetX,e.y-=e.anchorOffsetY,e.anchorOffsetX=0,e.anchorOffsetY=0},e.updatePosistion=function(e){e.width===GameConfig.WINSIZE_WIDTH&&(e.width=GameConfig.curWidth()),e.height===GameConfig.WINSIZE_HEIGHT&&(e.height=GameConfig.curHeight())},e.addButtonScaleEffects=function(t){if(t)if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.name||t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t),e.setAnchorPot(t);else for(var i=t.numChildren,o=0;i>o;o++){var r=t.getChildAt(o);e.addButtonScaleEffects(r)}},e.addTouchScaleEffect=function(t){t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t)},e.onButtonTouchBegan=function(e){majiang.MajiangUtils.playClick();var t=e.target,i=t.scaleX,o=t.scaleY;egret.Tween.get(t).to({scaleX:i-.1,scaleY:o-.1},50).to({scaleX:i,scaleY:o},50)},e.removeButtonScaleEffects=function(t){if(t)if(egret.is(t,egret.getQualifiedClassName(eui.Button)))t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onButtonTouchBegan,t);else for(var i=t.numChildren,o=0;i>o;o++){var r=t.getChildAt(o);e.removeButtonScaleEffects(r)}},e.setAnchorPot=function(e){e.anchorOffsetX||e.anchorOffsetY||(e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x+=e.width/2,e.y+=e.height/2)},e.removeSelf=function(t){t&&e.removeFromParent(t)},e.removeSelfByAmi=function(t,i){return new Promise(function(o,r){egret.Tween.get(t).to({alpha:0},i).call(function(){e.removeFromParent(t),o("success")},t)})},e.getParentByClass=function(t,i){var o=t.parent;return o?o instanceof i?o:e.getParentByClass(o,i):null},e.getChildByClass=function(e,t){for(var i=e.numChildren,o=0;i>o;o++){var r=e.getChildAt(o);if(r instanceof t)return r}return null},e.fullscreen=function(e){e.width=GameConfig.curWidth(),e.height=GameConfig.curHeight()},e.getRealWidth=function(e){return e.width*e.scaleX},e.getRealHeight=function(e){return e.height*e.scaleY},e.setUI2CenterX=function(e){e.x=GameConfig.curWidth()/2-e.width/2},e.setUI2CenterY=function(e){e.y=GameConfig.curHeight()/2-e.height/2},e.lockObject=function(e){e.touchEnabled=!1,egret.setTimeout(function(){e.touchEnabled=!0},this,1e3)},e.changeOritation1=function(e){e?GameConfig.curStage().orientation=egret.OrientationMode.PORTRAIT:GameConfig.curStage().orientation=egret.OrientationMode.LANDSCAPE},e.isPortait1=function(){return GameConfig.curStage().orientation==egret.OrientationMode.PORTRAIT},e.changeResize=function(e){switch(e){case 1:egret.Capabilities.isMobile&&(egret.MainContext.instance.stage.orientation=egret.OrientationMode.LANDSCAPE),GameConfig.CURRENT_ISSHU=!1,egret.MainContext.instance.stage.setContentSize(1280,720);break;case 2:egret.Capabilities.isMobile&&(egret.MainContext.instance.stage.orientation=egret.OrientationMode.PORTRAIT),GameConfig.CURRENT_ISSHU=!0,egret.MainContext.instance.stage.setContentSize(720,1280)}},e}();e.UIUtils=t,__reflect(t.prototype,"game.UIUtils")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.arrChangePos=function(e,t,i){var o=e.indexOf(t),r=e.indexOf(i);e.splice.apply(e,[o,1].concat(e.splice(r,1,e[o])))},e.rang=function(e,t){return Math.round(Math.random()*(t-e)+e)},e.isRang=function(e,t,i){return e>=t&&i>=e},e.random=function(e,t,i,o){return i?e+parseFloat((Math.random()*(t-e)).toFixed(o?o:2)):e+Math.round(Math.random()*(t-e))},e.limit=function(e,t,i){return Math.max(t,Math.min(i,e))},e.ang2rad=function(e){return e/180*Math.PI},e.rad2ang=function(e){return e/Math.PI*180},e.getBigNumberShow=function(e){return 1e4>e?e+"":(e/=1e3,e.toFixed(1)+"K")},e.isElinArr=function(e,t){return t.indexOf(e)>-1},e.isArrCrossing=function(t,i){for(var o=0;o<t.length;o++)if(e.isElinArr(t[o],i))return!0;return!1},e.getURLQueryString=function(e){if(egret.Capabilities.runtimeType==egret.RuntimeType.WEB){var t=decodeURIComponent(window.location.href);t=t.replace(/&quot/g,'"');var i;return t.indexOf("#?")>0?(t=t.replace("#?","&"),i=t.match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)"))):i=window.location.search.substr(1).match(new RegExp("(^|&)"+e+"=([^&]*)(&|$)")),i?i[2]:null}},e.S4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},e.guid=function(){return e.S4()+e.S4()+"-"+e.S4()+"-"+e.S4()+"-"+e.S4()+"-"+e.S4()+e.S4()+e.S4()},e.getMaxStr=function(e){return e.length<=5?e:e.substr(0,5)+"..."},e.removeArrayItem=function(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)},e.isCollsionRect2=function(e,t,i,o,r,n,a,s){return e>=r&&e>=r+a||r>=e&&r>=e+i||t>=n&&t>=n+s||n>=t&&n>=t+o?!1:!0},e.rect1CollsionRect2=function(t,i){return e.isCollsionRect2(t.x,t.y,t.width,t.height,i.x,i.y,i.width,i.height)},e.getRotationXy=function(t,i){var o,r=e.ang2rad(90-Math.abs(i));return o=0>i?{x:t*Math.cos(r),y:t*Math.sin(r)}:{x:-(t*Math.cos(r)),y:t*Math.sin(r)}},e.valueEqual=function(e,t){return e.toString()==t.toString()},e.sleepTime=function(e){var t=this;return new Promise(function(i,o){egret.setTimeout(function(){i()},t,e)})},e.ggdl=function(e,t,i,o){var r=Math.abs(e-i),n=Math.abs(t-o);return Math.sqrt(Math.pow(r,2)+Math.pow(n,2))},e}();e.Utils=t,__reflect(t.prototype,"game.Utils")}(game||(game={}));